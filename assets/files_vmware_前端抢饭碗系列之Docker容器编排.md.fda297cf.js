import{_ as s,c as a,o as n,a as p}from"./app.b7b3599c.js";const A=JSON.parse('{"title":"\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u955C\u50CFsave\u548Cload","slug":"\u955C\u50CFsave\u548Cload"},{"level":2,"title":"\u5BB9\u5668export\u548Cimport","slug":"\u5BB9\u5668export\u548Cimport"},{"level":2,"title":"\u5F00\u542F\u8BA4\u8BC1","slug":"\u5F00\u542F\u8BA4\u8BC1"},{"level":2,"title":"\u5B89\u88C5\u5378\u8F7D","slug":"\u5B89\u88C5\u5378\u8F7D"},{"level":2,"title":"nodejs\u548Credis\u4F7F\u7528","slug":"nodejs\u548Credis\u4F7F\u7528"},{"level":2,"title":"\u547D\u4EE4\u8BF4\u660E","slug":"\u547D\u4EE4\u8BF4\u660E"},{"level":3,"title":"ps","slug":"ps"},{"level":3,"title":"logs","slug":"logs"},{"level":3,"title":"start","slug":"start"},{"level":3,"title":"stop","slug":"stop"},{"level":3,"title":"images","slug":"images"},{"level":3,"title":"scale","slug":"scale"},{"level":3,"title":"build","slug":"build"},{"level":3,"title":"down","slug":"down"},{"level":3,"title":"up","slug":"up"},{"level":2,"title":"Compose\u6A21\u677F\u6587\u4EF6","slug":"compose\u6A21\u677F\u6587\u4EF6"},{"level":3,"title":"version","slug":"version"},{"level":3,"title":"image","slug":"image"},{"level":3,"title":"build","slug":"build-1"},{"level":3,"title":"command","slug":"command"},{"level":3,"title":"links","slug":"links"},{"level":3,"title":"external_links","slug":"external-links"},{"level":3,"title":"depends_on","slug":"depends-on"},{"level":3,"title":"networks","slug":"networks"},{"level":3,"title":"network_mode","slug":"network-mode"},{"level":3,"title":"environment","slug":"environment"},{"level":3,"title":"env_file","slug":"env-file"},{"level":3,"title":"volumes","slug":"volumes"},{"level":3,"title":"ports","slug":"ports"},{"level":3,"title":"expose","slug":"expose"},{"level":3,"title":"dns","slug":"dns"},{"level":3,"title":"restart","slug":"restart"},{"level":2,"title":"gitbucket","slug":"gitbucket"},{"level":2,"title":"filebrowser","slug":"filebrowser"},{"level":2,"title":"scrapyd","slug":"scrapyd"},{"level":2,"title":"chevereto","slug":"chevereto"},{"level":2,"title":"portainer","slug":"portainer"},{"level":2,"title":"webssh","slug":"webssh"},{"level":2,"title":"wizserver","slug":"wizserver"},{"level":2,"title":"jellyfin","slug":"jellyfin"},{"level":2,"title":"aria2","slug":"aria2"}],"relativePath":"files/vmware/\u524D\u7AEF\u62A2\u996D\u7897\u7CFB\u5217\u4E4BDocker\u5BB9\u5668\u7F16\u6392.md"}'),l={name:"files/vmware/\u524D\u7AEF\u62A2\u996D\u7897\u7CFB\u5217\u4E4BDocker\u5BB9\u5668\u7F16\u6392.md"},e=p(`<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ad23de9ecae4e4b9d67519fbca2217c~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?" alt="\u524D\u7AEF\u62A2\u996D\u7897\u7CFB\u5217\u4E4BDocker\u5BB9\u5668\u7F16\u6392"></p><p>\u672C\u6587\u662FDocker\u7684\u7B2C\u4E09\u7BC7\u6587\u7AE0\uFF0C\u6211\u4EEC\u5C06\u4E4B\u524DDocker\u4E2D\u9057\u6F0F\u7684\u4E00\u4E9B\u95EE\u9898\u8FDB\u884C\u6DF1\u5165\u7684\u63A2\u8BA8\uFF0C\u6BD4\u5982\u8BBE\u7F6E\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF\u3001\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA\u7B49\u4E00\u4E9B\u5E38\u7528\u7684\u529F\u80FD\uFF1B\u7136\u540E\u6211\u4EEC\u4F1A\u642D\u5EFA\u4E00\u4E2A\u79C1\u6709\u7684Registry\u4ED3\u5E93\uFF0C\u4E0A\u4F20\u548C\u62C9\u53D6\u6211\u4EEC\u81EA\u5DF1\u7684\u955C\u50CF\uFF1B\u4EE5\u53CA\u6700\u91CD\u8981\u7684\u90E8\u5206\uFF0C\u5BB9\u5668\u7684\u7F16\u6392\uFF0C\u8FD9\u6B21\u6211\u4EEC\u4E0D\u518D\u662F\u5355\u6253\u72EC\u6597\u5730\u64CD\u4F5C\u4E00\u4E2A\u5BB9\u5668\u4E86\uFF0C\u6211\u8981\u4E00\u6B21\u6253\u5341\u4E2A\u5BB9\u5668\uFF01\u5F00\u73A9\u7B11\u5F00\u73A9\u7B11\uFF0C\u7B14\u8005\u53C8\u4E0D\u662F\u53F6\u95EE\u3002\u6700\u540E\u7B14\u8005\u4F1A\u5206\u4EAB\u4E00\u4E9B\u5E38\u7528\u7684\u3001\u6709\u8DA3\u53C8\u5B9E\u7528\u7684\u955C\u50CF\uFF0C\u6BD4\u5982\u79C1\u6709\u7F51\u76D8\u3001\u722C\u866B\u3001\u56FE\u5E8A\u3001\u79C1\u6709\u7B14\u8BB0\u3001\u79C1\u6709\u5A92\u4F53\u5E93\u4EE5\u53CA\u4E0B\u8F7D\u5DE5\u5177\u7B49\u7B49\uFF0C\u53EF\u4EE5\u63D0\u5347\u6211\u4EEC\u7684\u65E5\u5E38\u5DE5\u4F5C\u6548\u7387\uFF0C\u8BB0\u5F97\u770B\u5B8C\u54E6\uFF1B\u672C\u6587\u4F9D\u65E7\u5E72\u8D27\u6EE1\u6EE1\uFF0C\u65B0\u6765\u7684\u5C0F\u4F19\u4F34\u8BB0\u5F97\u70B9\u8D5E\u5173\u6CE8\u54E6\u3002</p><blockquote><p>\u672C\u6587\u9996\u53D1\u4E8E\u516C\u4F17\u53F7<code>\u3010\u524D\u7AEF\u58F9\u8BFB\u3011</code>\uFF0C\u66F4\u591A\u7CBE\u5F69\u5185\u5BB9\u656C\u8BF7\u5173\u6CE8\u516C\u4F17\u53F7\u6700\u65B0\u6D88\u606F\u3002</p></blockquote><h1 id="\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF" tabindex="-1">\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF <a class="header-anchor" href="#\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF" aria-hidden="true">#</a></h1><p>\u6211\u4EEC\u5728\u542F\u52A8docker\u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u7ECF\u5E38\u9700\u8981\u5411\u5BB9\u5668\u4F20\u9012\u4E00\u4E9B\u53C2\u6570\uFF0C\u4EE5\u4FBF\u5BB9\u5668\u8FDB\u884C\u4E00\u4E9B\u7279\u6B8A\u7684\u914D\u7F6E\uFF0C\u6BD4\u5982\u7ED9mysql\u4F20\u5165<code>MYSQL_ROOT_PASSWORD</code>\u7684root\u7528\u6237\u5BC6\u7801\uFF0C\u6216\u8005\u6211\u4EEC\u60F3\u5728\u81EA\u5DF1\u7684\u5BB9\u5668\u4E2D\u4F20\u5165\u4E00\u4E9B\u6570\u636E\u5E93\u7684\u914D\u7F6E\u7B49\u7B49\u3002</p><p>\u7B2C\u4E00\u79CD\u65B9\u5F0F\u4E5F\u6700\u7B80\u5355\u7684\uFF0C\u4E5F\u662F\u6700\u5E38\u89C1\u7684\uFF0C\u5728run\u5BB9\u5668\u65F6\u4F7F\u7528<code>--env</code>\uFF0C\u4E5F\u5C31\u662F\u6211\u4EEC\u5728\u5404\u4E2A\u6587\u6863\u4E2D\u7ECF\u5E38\u89C1\u5230\u7684\u7B80\u5199<code>-e</code>\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -itd -e MYSQL_USER=root -e MYSQL_PASS=pass xxx:latest</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5728js\u4EE3\u7801\u4E2D\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u53D8\u91CF<code>process.<wbr>env</code>\u6765\u83B7\u53D6</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> MYSQL_USER</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> MYSQL_PASS </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728python\u4EE3\u7801\u4E2D\u8C03\u7528<code>os.getenv</code>\u83B7\u53D6\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">MYSQL_USER = os.getenv(&quot;MYSQL_USER&quot;, &quot;&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">MYSQL_PASS = os.getenv(&quot;MYSQL_PASS&quot;, &quot;&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7B2C\u4E8C\u79CD\u65B9\u5F0F\uFF0C\u4E5F\u662F\u6211\u4EEC\u5728<a href="https://link.juejin.cn/?target=https%3A%2F%2Fxieyufei.com%2F2022%2F03%2F22%2FFrontEnd-Docker-Advance.html" target="_blank" rel="noopener noreferrer">Docker\u8FDB\u9636\u90E8\u7F72</a>\u4E2D\u4ECB\u7ECD\u7684\uFF0C\u901A\u8FC7Dockerfile\u6587\u4EF6\u7684<code>ENV\u6307\u4EE4</code>\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ENV MYSQL_USER root</span></span>
<span class="line"><span style="color:#A6ACCD;">ENV MYSQL_PASS pass</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7B2C\u4E09\u79CD\u65B9\u5F0F\uFF0Crun\u5BB9\u5668\u65F6\uFF0C\u901A\u8FC7<code>--env-file</code>\u6307\u4EE4\u52A0\u8F7Denv\u6587\u4EF6\uFF0C\u9996\u5148\u6211\u4EEC\u628A\u914D\u7F6E\u4FE1\u606F\u653E\u5728\u6587\u4EF6env.list\u4E2D\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ cat env.list</span></span>
<span class="line"><span style="color:#A6ACCD;">MYSQL_USER=root3</span></span>
<span class="line"><span style="color:#A6ACCD;">MYSQL_PASS=pass3</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8\u5BB9\u5668\u65F6\u4F20\u5165\u6587\u4EF6\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u4E0D\u7528\u4F20\u5165\u4E00\u5927\u5806\u7684-e\u547D\u4EE4\u4E86\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -itd --env-file env.list xxx:latest</span></span>
<span class="line"></span></code></pre></div><p>\u7ECF\u8FC7\u6D4B\u8BD5\uFF0C\u4E09\u79CD\u65B9\u5F0F\u7684\u4F18\u5148\u7EA7\u5982\u4E0B\uFF1A</p><blockquote><p>-e\u6307\u4EE4 <code>\u5927\u4E8E&gt;</code> --env-file <code>\u5927\u4E8E&gt;</code> ENV\u6307\u4EE4</p></blockquote><p>\u6211\u4EEC\u67E5\u770B\u5BB9\u5668\u7684\u73AF\u5883\u53D8\u91CF\u4E5F\u5F88\u7B80\u5355\uFF0C\u901A\u8FC7<code>inspect</code>\u547D\u4EE4\uFF0C\u4E5F\u53EF\u4EE5\u52A0\u4E0Agrep\u8FC7\u6EE4\u60F3\u8981\u7684\u5B57\u6BB5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker inspect XXX </span></span>
<span class="line"><span style="color:#A6ACCD;">$ docker inspect XXX </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep MYSQL_USER</span></span>
<span class="line"></span></code></pre></div><p>\u4E5F\u53EF\u4EE5\u89E3\u6790\u4E00\u4E0B\u8FD4\u56DE\u5185\u5BB9\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker inspect -f </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{{range $index, $value := .Config.Env}}{{println $value}}{{end}}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> XXX</span></span>
<span class="line"></span></code></pre></div><h1 id="\u955C\u50CF\u4E0E\u5BB9\u5668\u7684\u5BFC\u5165\u5BFC\u51FA" tabindex="-1">\u955C\u50CF\u4E0E\u5BB9\u5668\u7684\u5BFC\u5165\u5BFC\u51FA <a class="header-anchor" href="#\u955C\u50CF\u4E0E\u5BB9\u5668\u7684\u5BFC\u5165\u5BFC\u51FA" aria-hidden="true">#</a></h1><p>\u6709\u65F6\u5019\u6211\u4EEC\u90E8\u7F72docker\u5BB9\u5668\u4F1A\u9047\u5230\u95EE\u9898\uFF0C\u6BD4\u5982\u670D\u52A1\u5668\u5728\u5185\u7F51\uFF0C\u4E0D\u80FD\u8FDE\u63A5\u5916\u7F51\u7684\u60C5\u51B5\uFF08\u4E00\u4E9B\u5177\u6709\u8F83\u9AD8\u4FDD\u5BC6\u6027\u7684\u4F01\u4E1A\uFF09\uFF0C\u6216\u8005\u7F51\u7EDC\u4E0B\u8F7D\u6162\uFF0C\u4E0D\u901A\u7545\uFF1B\u6211\u4EEC\u5C31\u53EF\u4EE5\u7F16\u8BD1\u3001\u5BFC\u51FA\u955C\u50CF\u540E\u5728\u5185\u7F51\u670D\u52A1\u5668\u5BFC\u5165\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u5185\u7F51\u90E8\u7F72\u3002</p><h2 id="\u955C\u50CFsave\u548Cload" tabindex="-1">\u955C\u50CFsave\u548Cload <a class="header-anchor" href="#\u955C\u50CFsave\u548Cload" aria-hidden="true">#</a></h2><p>\u955C\u50CF\u7684\u5BFC\u5165\u6211\u4EEC\u901A\u5E38\u4F7F\u7528<code>docker save</code>\u548C\`\`docker load\`\u547D\u4EE4\uFF0Csave\u547D\u4EE4\u5C06\u955C\u50CF\u6253\u5305\u6210tar\u6587\u4EF6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker save img:latest </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> img.tar</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u6216\u8005</span></span>
<span class="line"><span style="color:#A6ACCD;">$ docker save -o img.tar img:latest</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u5BFC\u51FA\u955C\u50CF\u5C3D\u91CF\u4F7F\u7528<code>\u955C\u50CF\u540D:\u6807\u7B7E</code>\u7684\u5F62\u5F0F\uFF0C\u4F7F\u7528\u955C\u50CFid\u5BB9\u6613\u51FA\u73B0\u5BFC\u5165\u540E\u955C\u50CF\u540D\u51FA\u73B0<code>&lt;none&gt;</code>\u7684\u60C5\u51B5\u3002</p></blockquote><p>\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5C06\u591A\u4E2A\u955C\u50CF\u6253\u5305\u5230\u4E00\u4E2A\u6587\u4EF6\u8FDB\u884C\u5BFC\u51FA\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker save img1:latest img2:latest </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> img.tar</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528load\u547D\u4EE4\u5C31\u53EF\u4EE5\u5C06\u5BFC\u51FA\u7684\u955C\u50CF\u5305\u52A0\u8F7D\u8FDB\u6765\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker load </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> img.tar</span></span>
<span class="line"></span></code></pre></div><p>save\u548Cload\u7684\u5E94\u7528\u573A\u666F\uFF0C\u5C31\u662F\u6211\u4EEC\u4E0A\u9762\u8BF4\u7684\u5185\u7F51\u90E8\u7F72\u7684\u60C5\u51B5\uFF1B\u540C\u65F6\u5982\u679C\u6211\u4EEC\u7684\u5E94\u7528\u8FD8\u662F\u4F7F\u7528docker compose\u7F16\u6392\u7684\u591A\u4E2A\u955C\u50CF\u7EC4\u5408\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528save\u5C06\u7528\u5230\u7684\u591A\u4E2A\u955C\u50CF\u6253\u5305\uFF0C\u7136\u540E\u62F7\u8D1D\u5230\u5BA2\u6237\u670D\u52A1\u5668\u4E0A\u4F7F\u7528load\u8F7D\u5165\u3002</p><h2 id="\u5BB9\u5668export\u548Cimport" tabindex="-1">\u5BB9\u5668export\u548Cimport <a class="header-anchor" href="#\u5BB9\u5668export\u548Cimport" aria-hidden="true">#</a></h2><p>\u9996\u5148\u6211\u4EEC\u67E5\u770B\u672C\u673A\u7684\u6240\u6709\u5BB9\u5668\uFF0C\u4F7F\u7528<code>export\u547D\u4EE4</code>\u5C06\u5BB9\u5668ID\u5BFC\u51FA\u6210\u6587\u4EF6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker </span><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> 3e877a80b319 </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> server.tar</span></span>
<span class="line"></span></code></pre></div><p>\u5BFC\u51FA\u5230\u6587\u4EF6\u540E\uFF0C\u6211\u4EEC\u5728\u672C\u5730\u76EE\u5F55\u53EF\u4EE5\u770B\u5230\u8BE5tar\u5305\u6587\u4EF6\uFF0C\u6211\u4EEC\u518D\u4F7F\u7528<code>import\u547D\u4EE4</code>\u5C06\u955C\u50CF\u6587\u4EF6\u5BFC\u5165\u8FDB\u6765\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker import server.tar my-server:latest</span></span>
<span class="line"></span></code></pre></div><p>\u5BFC\u5165\u540E\u7684\u5BB9\u5668\u6587\u4EF6\u4F1A\u6210\u4E3A\u4E00\u4E2A\u955C\u50CF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4E3A\u5B83\u6307\u5B9A\u65B0\u7684\u540D\u79F0\uFF0C\u5982\u679C\u5B58\u5728\u540C\u540D\u955C\u50CF\uFF0C\u539F\u6709\u7684\u540D\u79F0\u4F1A\u88AB\u5265\u593A\uFF0C\u8D4B\u7ED9\u65B0\u7684\u955C\u50CF\u3002</p><p>export\u548Cimport\u7684\u5E94\u7528\u573A\u666F\u4E3B\u662F\u8981\u7528\u6765\u5236\u4F5C\u57FA\u7840\u955C\u50CF\uFF0C\u6BD4\u5982\u6211\u4EEC\u4ECE\u4E00\u4E2Aubuntu\u955C\u50CF\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\uFF0C\u7136\u540E\u5B89\u88C5\u4E00\u4E9B\u8F6F\u4EF6\u548C\u8FDB\u884C\u4E00\u4E9B\u8BBE\u7F6E\u540E\uFF0C\u4F7F\u7528docker export\u4FDD\u5B58\u4E3A\u4E00\u4E2A\u57FA\u7840\u955C\u50CF\u3002\u7136\u540E\u628A\u8FD9\u4E2A\u955C\u50CF\u5206\u53D1\u7ED9\u5176\u4ED6\u4EBA\u4F7F\u7528\uFF0C\u6BD4\u5982\u4F5C\u4E3A\u57FA\u7840\u7684\u5F00\u53D1\u73AF\u5883\u3002</p><p>\u603B\u7ED3\u4E00\u4E0Bdocker save\u548Cdocker export\u7684\u533A\u522B\uFF1A</p><ul><li>docker save\u4FDD\u5B58\u7684\u662F\u955C\u50CF\uFF08image\uFF09\uFF0Cdocker export\u4FDD\u5B58\u7684\u662F\u5BB9\u5668\uFF08container\uFF09\uFF1B</li><li>docker load\u7528\u6765\u8F7D\u5165\u955C\u50CF\u5305\uFF0Cdocker import\u7528\u6765\u8F7D\u5165\u5BB9\u5668\u5305\uFF0C\u4F46\u4E24\u8005\u90FD\u4F1A\u6062\u590D\u4E3A\u955C\u50CF\uFF1B</li><li>docker load\u4E0D\u80FD\u5BF9\u8F7D\u5165\u7684\u955C\u50CF\u91CD\u547D\u540D\uFF0C\u800Cdocker import\u53EF\u4EE5\u4E3A\u955C\u50CF\u6307\u5B9A\u65B0\u540D\u79F0\u3002</li></ul><h1 id="\u79C1\u6709\u4ED3\u5E93" tabindex="-1">\u79C1\u6709\u4ED3\u5E93 <a class="header-anchor" href="#\u79C1\u6709\u4ED3\u5E93" aria-hidden="true">#</a></h1><p>\u5728Docker\u4E2D\uFF0C\u6211\u4EEC\u6267\u884C<code>pull XXX</code>\u67D0\u4E2A\u955C\u50CF\u7684\u65F6\u5019\uFF0C\u5B9E\u9645\u4E0A\u5B83\u662F\u4ECE<code>registry.hub.docker.com</code>\u5B98\u65B9\u7684\u955C\u50CF\u4ED3\u5E93\u53BB\u62C9\u53D6\u7684\uFF1B\u5728\u5B9E\u9645\u5DE5\u4F5C\u4E2D\uFF0C\u6211\u4EEC\u4E0D\u4F1A\u628A\u4F01\u4E1A\u7684\u9879\u76EEpush\u5230\u516C\u6709\u4ED3\u5E93\u4E2D\u7BA1\u7406\uFF1B\u6240\u4EE5\u4E3A\u4E86\u66F4\u597D\u7684\u7BA1\u7406\uFF0CDocker\u4E0D\u4EC5\u63D0\u4F9B\u4E86\u516C\u6709\u4ED3\u5E93\uFF0C\u4E5F\u5141\u8BB8\u6211\u4EEC\u642D\u5EFA\u79C1\u6709\u4ED3\u5E93\u3002</p><p>Docker Registry\u662F\u4E00\u4E2A\u65E0\u72B6\u6001\uFF0C\u9AD8\u5EA6\u53EF\u6269\u5C55\u7684\u670D\u52A1\u5668\u7AEF\u5E94\u7528\u7A0B\u5E8F\uFF0C\u5B83\u5B58\u50A8\u5E76\u5141\u8BB8\u60A8\u5206\u53D1Docker\u6620\u50CF\uFF1B\u6211\u4EEC\u901A\u8FC7run\u547D\u4EE4\u542F\u52A8\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -d -p 5000:5000 -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/var/lib/registry --restart=always --name registry registry:2</span></span>
<span class="line"></span></code></pre></div><p>Registry\u670D\u52A1\u9ED8\u8BA4\u5C06\u4E0A\u4F20\u7684\u955C\u50CF\u4FDD\u5B58\u5728\u5BB9\u5668\u7684<code>/var/lib/registry</code>\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u670D\u52A1\u5668\u672C\u5730\u7684\u6587\u4EF6\u5939\u6302\u8F7D\u5230\u8BE5\u76EE\u5F55\uFF0C\u5373\u53EF\u5B9E\u73B0\u4FDD\u5B58\u955C\u50CF\uFF1B\u901A\u8FC7\u4EE5\u4E0Bcurl\u6211\u4EEC\u53EF\u4EE5\u67E5\u770B\u670D\u52A1\u5668\u662F\u5426\u542F\u52A8\uFF0C\u4EE5\u53CA\u670D\u52A1\u5668\u4E0A\u7684\u955C\u50CF\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ curl http://192.168.0.1:5000/v2/_catalog</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u8FD4\u56DE\u6570\u636E\uFF1A{&quot;repositories&quot;:[]}</span></span>
<span class="line"></span></code></pre></div><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u670D\u52A1\u5668\u63A8\u9001\u955C\u50CF\u5230\u4ED3\u5E93\u9ED8\u8BA4\u4F7F\u7528\u7684\u662Fhttps\uFF0C\u4F46\u662F\u6211\u4EEC\u5728\u4F01\u4E1A\u5185\u90E8\u4F7F\u7528\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u52A0https\uFF1B\u9700\u8981\u5728\u5BA2\u6237\u7AEF\u914D\u7F6E\u53EF\u4FE1\u7684\u4ED3\u5E93\u5730\u5740\u4E3Ahttp\uFF0C\u5426\u5219push\u65F6\u4F1A\u62A5\u5982\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">The push refers to repository </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">192.168.0.1:5000/server</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">Get </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://192.168.0.1:5000/v2/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: http: server gave HTTP response to HTTPS client</span></span>
<span class="line"></span></code></pre></div><p>\u5728windows\u7684Docker\u5BA2\u6237\u7AEF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539Desktop\u7684\u914D\u7F6E\uFF0C\u5728Setting\u4E2D\u9009\u62E9<code>Docker Engine</code>\uFF0C\u6DFB\u52A0insecure-registries\u5B57\u6BB5\uFF0C\u5B8C\u6210\u540E\u70B9\u51FB<code>Apply &amp; Restart</code>\u91CD\u542F\u5373\u53EF\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94727c6902a440fa96a65730985c2627~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u6DFB\u52A0http\u4ED3\u5E93\u5730\u5740"></p><p>\u5728linux\u5BA2\u6237\u7AEF\uFF0C\u6211\u4EEC\u4FEE\u6539<code>/etc/docker/daemon.json</code>\u6587\u4EF6\uFF0C\u6211\u4EEC\u540C\u6837\u4E5F\u662F\u52A0\u5165<code>insecure-registries</code>\uFF0C\u7136\u540E\u6267\u884C\u547D\u4EE4<code>sudo service docker restart</code>\u91CD\u542Fdocker\uFF1A</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">insecure-registries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.0.1:5000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u4FEE\u6539\u8BE5\u6587\u4EF6\u5FC5\u987B\u7B26\u5408JSON\u6587\u4EF6\u89C4\u8303\uFF0C\u5426\u5219\u4F1A\u542F\u52A8\u5931\u8D25</p></blockquote><p>Registry\u670D\u52A1\u542F\u52A8\u540E\uFF0C\u6211\u4EEC\u6765\u770B\u4E0B\u5982\u4F55\u63A8\u9001\u955C\u50CF\u5230\u4ED3\u5E93\u4E2D\uFF1B\u6211\u4EEC\u4ECEDocker Hub\u4E0B\u8F7D\u4E00\u4E2A<code>ubuntu:18.04</code>\u955C\u50CF\uFF0C\u7136\u540E\u5C06\u5B83\u63A8\u9001\u5230\u79C1\u6709\u4ED3\u5E93\uFF1B\u9996\u5148\u7ED9\u8FD9\u4E2A\u955C\u50CF\u91CD\u65B0\u6253\u4E0A\u670D\u52A1\u5668\u7684\u6807\u7B7E\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker tag ubuntu:18.04 192.168.0.1:5000/my-ubuntu:latest</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528<code>push\u547D\u4EE4</code>\u63A8\u9001\u955C\u50CF\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker push 192.168.0.1:5000/my-ubuntu:latest</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u5728\u53E6\u5916\u4E00\u53F0\u673A\u5668\u4E0A\u62C9\u53D6\u8FD9\u4E2A\u955C\u50CF\uFF0C\u4E5F\u53EF\u4EE5\u5C06\u672C\u5730\u7684<code>192.168.0.1:5000/my-ubuntu:latest</code>\u548C<code>ubuntu:18.04</code>\u955C\u50CF\u5220\u9664\u540E\uFF0C\u518D\u6B21\u62C9\u53D6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker pull 192.168.0.1:5000/my-ubuntu:latest</span></span>
<span class="line"></span></code></pre></div><p>\u518D\u6B21curl\u67E5\u770B\u670D\u52A1\u5668\uFF0C\u6211\u4EEC\u5C31\u80FD\u770B\u5230\u8BE5\u955C\u50CF\u5DF2\u7ECF\u5728\u670D\u52A1\u5668\u751F\u6548\u4E86</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ curl http://192.168.0.1:5000/v2/_catalog</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u8FD4\u56DE\u6570\u636E\uFF1A{&quot;repositories&quot;:[&quot;my-ubuntu&quot;]}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5F00\u542F\u8BA4\u8BC1" tabindex="-1">\u5F00\u542F\u8BA4\u8BC1 <a class="header-anchor" href="#\u5F00\u542F\u8BA4\u8BC1" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u4E0A\u9762\u4ED3\u5E93\u642D\u5EFA\u540E\uFF0C\u6240\u6709\u5BA2\u6237\u7AEF\u90FD\u53EF\u4EE5push\u3001pull\uFF0C\u8FD9\u662F\u6211\u4EEC\u4E0D\u5E0C\u671B\u770B\u5230\u7684\uFF0C\u6211\u4EEC\u60F3\u8981\u8BA4\u8BC1\u7684\u7528\u6237\u624D\u80FD\u591F\u8BBF\u95EE\uFF1B\u5C06\u539F\u6709\u5BB9\u5668\u5220\u9664\uFF0C\u521B\u5EFA\u4E00\u4E2A\u4FDD\u5B58\u8D26\u53F7\u5BC6\u7801\u7684\u6587\u4EF6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ mkdir -p </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/auth </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/auth</span></span>
<span class="line"><span style="color:#A6ACCD;">$ docker run --rm  --entrypoint htpasswd httpd:alpine -Bbn username password </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> ./htpasswd</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u4E0A\u9762\u7684username\u548Cpassword\u66FF\u6362\u6210\u81EA\u5DF1\u7684\u8D26\u53F7\u5BC6\u7801\uFF0C\u8FD0\u884C\u5BB9\u5668\u65F6\u6211\u4EEC\u7ED1\u5B9Aauth\u6587\u4EF6\u5939\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -d -p 5000:5000</span></span>
<span class="line"><span style="color:#A6ACCD;">    -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/var/lib/registry \\ </span></span>
<span class="line"><span style="color:#A6ACCD;">    -v </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/auth:/auth \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">REGISTRY_AUTH=htpasswd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e  REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    --restart always --name registry registry:2</span></span>
<span class="line"></span></code></pre></div><p>\u670D\u52A1\u5668\u5F00\u542F\u8BA4\u8BC1\u540E\u5BA2\u6237\u7AEF\u518Dpull\u3001push\u4F1A\u63D0\u793A<code>no basic auth credentials</code>\uFF0C\u6211\u4EEC\u9700\u8981\u5148\u8FDB\u884C\u767B\u5F55\u64CD\u4F5C\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># \u767B\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">$ docker login 192.168.0.1:5000</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u9000\u51FA\u767B\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">$ docker </span><span style="color:#82AAFF;">logout</span><span style="color:#A6ACCD;"> 192.168.0.1:5000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># windows\u5BA2\u6237\u7AEF\u8FD0\u884C\u6DFB\u52A0winpty</span></span>
<span class="line"><span style="color:#A6ACCD;">$ winpty docker login 192.168.0.1:5000</span></span>
<span class="line"></span></code></pre></div><h1 id="compose" tabindex="-1">Compose <a class="header-anchor" href="#compose" aria-hidden="true">#</a></h1><p><code>Docker Compose</code>\u662FDocker\u5B98\u65B9\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u8D1F\u8D23\u5B9E\u73B0\u5BF9Docker\u5BB9\u5668\u96C6\u7FA4\u7684\u5FEB\u901F\u7F16\u6392\u3002\u5728\u524D\u4E24\u7BC7Docker\u4E2D\uFF0C\u6211\u4EEC\u90FD\u662F\u4ECB\u7ECD\u4E86\u5355\u4E2A\u5BB9\u5668\u7684\u6784\u5EFA\u548C\u4F7F\u7528\u65B9\u5F0F\uFF1B\u5728\u65E5\u5E38\u5F00\u53D1\u4E2D\u6211\u4EEC\u7ECF\u5E38\u4F1A\u9047\u5230\u9700\u8981\u591A\u4E2A\u5BB9\u5668\u76F8\u4E92\u914D\u5408\u4F7F\u7528\u7684\u60C5\u51B5\uFF0C\u6BD4\u5982\u9664\u4E86web\u9879\u76EE\u672C\u8EAB\uFF0C\u8FD8\u8981\u6570\u636E\u5E93\u652F\u6301\uFF0Cnginx\u8D1F\u8F7D\u5747\u8861\u7B49\u7B49\uFF1B\u5982\u679C\u6240\u6709\u5BB9\u5668\u90FD\u901A\u8FC7\u547D\u4EE4\u884C\u7684\u65B9\u5F0F\u6784\u5EFA\u3001\u542F\u52A8\u3001\u5220\u9664\u7B49\u64CD\u4F5C\u4F1A\u5341\u5206\u7E41\u7410\uFF1B\u5C31\u597D\u50CF\u4F60\u6BCF\u5929\u4E0B\u73ED\u56DE\u5230\u5BB6\u91CC\uFF0C\u90FD\u9700\u8981\u8FDB\u884C\u5F00\u706F\u3001\u5173\u95ED\u7A97\u5E18\u3001\u6253\u5F00\u7535\u89C6\u3001\u716E\u996D\u7B49\u7B49\u4E00\u7CFB\u5217\u7B80\u5355\u4E14\u91CD\u590D\u7684\u64CD\u4F5C\u3002</p><p>Compose\u7684\u51FA\u73B0\u5C31\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u5B83\u901A\u8FC7\u5B9A\u4E49\u4E00\u4E2A\u6A21\u677F\u6587\u4EF6<code>docker-compose.yml</code>\u6765\u7BA1\u7406\u4E00\u7EC4\u76F8\u5173\u8054\u7684\u5BB9\u5668\uFF0C\u6240\u6709\u5BB9\u5668\u7684\u914D\u7F6E\u3001\u73AF\u5883\u7B49\u90FD\u8BB0\u5F55\u5230\u6587\u4EF6\u4E2D\uFF0C\u901A\u8FC7\u4E00\u4E2A\u547D\u4EE4\u5C31\u53EF\u4EE5\u63A7\u5236\u6240\u6709\u7684\u5BB9\u5668\uFF1BCompose\u5C31\u50CF\u667A\u80FD\u5BB6\u5C45\u7684\u7BA1\u5BB6\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5C06\u5F00\u706F\u3001\u5173\u95ED\u7A97\u5E18\u3001\u6253\u5F00\u7535\u89C6\u3001\u716E\u996D\u7B49\u64CD\u4F5C\u5728App\u4E2D\u8FDB\u884C\u5B9A\u4E49\uFF0C\u6211\u4EEC\u4E0B\u73ED\u56DE\u5230\u5BB6\u91CC\u53EA\u8981\u5BF9\u7740\u5B83\u53D1\u51FA\u6307\u4EE4\uFF1A<code>\u56DE\u5BB6\u5566\uFF01</code>\uFF0C\u5B83\u5C31\u4F1A\u81EA\u52A8\u5E2E\u4F60\u628A\u6240\u6709\u7684\u4E8B\u60C5\u505A\u4E86\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed637968927b4e1a930776fd6bfa6129~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u56DE\u5BB6\u5566"></p><h2 id="\u5B89\u88C5\u5378\u8F7D" tabindex="-1">\u5B89\u88C5\u5378\u8F7D <a class="header-anchor" href="#\u5B89\u88C5\u5378\u8F7D" aria-hidden="true">#</a></h2><p>Docker Compose\u652F\u6301Windows\u3001macOS\u548CLinux\u5E73\u53F0\uFF0C\u5728Windows\u548CmacOS\u5E73\u53F0\u6211\u4EEC\u76F4\u63A5\u4E0B\u8F7D\u5B89\u88C5\u5305\u5B89\u88C5\u540E\u81EA\u5E26Compose\uFF0C\u76F4\u63A5\u53EF\u4EE5\u4F7F\u7528\uFF0C\u6211\u4EEC\u901A\u8FC7<code>version</code>\u67E5\u770B\u5B89\u88C5\u60C5\u51B5\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose --version</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose version 1.29.2, build 5becea4c</span></span>
<span class="line"></span></code></pre></div><p>Linux\u7684\u5B89\u88C5\u4E5F\u5F88\u7B80\u5355\uFF0C\u76F4\u63A5\u4ECE\u5B98\u7F51\u4E0B\u8F7D\u7F16\u8BD1\u597D\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u5E76\u8D4B\u4E88\u6267\u884C\u6743\u9650\u5373\u53EF\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ sudo curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">uname -s</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">uname -m</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> /usr/local/bin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u56FD\u5185\u7528\u6237\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u52A0\u5FEB\u4E0B\u8F7D</span></span>
<span class="line"><span style="color:#A6ACCD;">$ sudo curl -L https://download.fastgit.org/docker/compose/releases/download/1.27.4/docker-compose-</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">uname -s</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">uname -m</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> /usr/local/bin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">$ sudo chmod +x /usr/local/bin/docker-compose</span></span>
<span class="line"></span></code></pre></div><h2 id="nodejs\u548Credis\u4F7F\u7528" tabindex="-1">nodejs\u548Credis\u4F7F\u7528 <a class="header-anchor" href="#nodejs\u548Credis\u4F7F\u7528" aria-hidden="true">#</a></h2><p>\u5E38\u89C1\u7684\u9879\u76EE\u5C31\u662Fweb\u7F51\u7AD9\uFF0C\u5305\u62ECweb\u5E94\u7528\u548C\u6570\u636E\u5E93\uFF08mysql\u3001mongodb\u6216redis\uFF09\uFF0C\u6211\u4EEC\u5C1D\u8BD5\u4E00\u4E2A\u80FD\u591F\u7B80\u5355\u8BB0\u5F55\u9875\u9762\u8BBF\u95EE\u6B21\u6570\u7684web\u5E94\u7528\u3002\u65B0\u5EFA\u4E00\u4E2Aexpress\u9879\u76EE\uFF0C\u7F16\u5199<code>app.js</code>\u6587\u4EF6\uFF1A</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> express </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">express</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> createClient </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">express</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> client </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createClient</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis://redis:6379</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">counter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">incr</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">counter</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Hello World! \u8BE5\u9875\u9762\u5DF2\u88AB\u8BBF\u95EE </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">counter</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> \u6B21</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">8000</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">connect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u6211\u4EEC\u8FDE\u63A5redis\u7684\u65F6\u5019\u4F7F\u7528\u4E86\u5BB9\u5668\u540D\u79F0\uFF0C\u800C\u4E0D\u662Fip\uFF0C\u4E0B\u9762\u6211\u4EEC\u4F1A\u4F7F\u7528\u5BB9\u5668\u540D\u79F0\u548C\u9759\u6001\u4E24\u79CD\u8FDE\u63A5\u65B9\u5F0F\u3002\u518D\u7F16\u5199\u6211\u4EEC\u7684<code>Dockerfile</code>\uFF0C\u6784\u5EFA\u955C\u50CF\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM node:14.19-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">WORKDIR /app</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY package*.json ./</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN npm install --registry https://registry.npm.taobao.org</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY . .</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPOSE 8000</span></span>
<span class="line"><span style="color:#A6ACCD;">CMD npm run start</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7F16\u5199<code>docker-compose.yml</code>\u6587\u4EF6\uFF0C\u8FD9\u662FCompose\u7684\u6A21\u677F\u6587\u4EF6\uFF0C\u6211\u4EEC\u7528\u52302\u4E2A\u670D\u52A1\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">depends_on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8000:8000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis:alpine</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u9879\u76EE\u4E2D\u5141\u8BB8<code>docker-compose up -d</code>\u5C31\u5728\u540E\u53F0\u542F\u52A8\u4E86Compose\u9879\u76EE\uFF0C\u8BBF\u95EE8000\u7AEF\u53E3\uFF0C\u6BCF\u6B21\u5237\u65B0\u9875\u9762\uFF0C\u8BA1\u6570\u5C31\u4F1A\u52A01\u3002</p><h2 id="\u547D\u4EE4\u8BF4\u660E" tabindex="-1">\u547D\u4EE4\u8BF4\u660E <a class="header-anchor" href="#\u547D\u4EE4\u8BF4\u660E" aria-hidden="true">#</a></h2><h3 id="ps" tabindex="-1">ps <a class="header-anchor" href="#ps" aria-hidden="true">#</a></h3><p>ps\u547D\u4EE4\uFF0C\u5217\u51FA\u6240\u6709\u7684\u5BB9\u5668\uFF0C\u4EE5\u53CA\u8FD0\u884C\u72B6\u6001\u548C\u6240\u6709\u7AEF\u53E3\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose ps</span></span>
<span class="line"><span style="color:#A6ACCD;">   Name               Command                 State           Ports</span></span>
<span class="line"><span style="color:#A6ACCD;">------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">demo_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp</span></span>
<span class="line"><span style="color:#A6ACCD;">demo_web_1     docker-entrypoint.sh /bin/ ...   Up      0.0.0.0:8080-</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">8080/tcp</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u8981\u67E5\u770B\u67D0\u4E2A\u670D\u52A1\u7684\u4FE1\u606F\uFF0Cps\u547D\u4EE4\u5E26\u4E0A\u67D0\u4E2A\u670D\u52A1\u7684\u540D\u79F0\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose ps </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">service name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="logs" tabindex="-1">logs <a class="header-anchor" href="#logs" aria-hidden="true">#</a></h3><p>logs\u547D\u4EE4\u67E5\u770B\u670D\u52A1\u5BB9\u5668\u7684\u8F93\u51FA\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose logs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">$ docker-compose logs </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">service name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="start" tabindex="-1">start <a class="header-anchor" href="#start" aria-hidden="true">#</a></h3><p>\u542F\u52A8\u5DF2\u7ECF\u5B58\u5728\u7684\u670D\u52A1\u5BB9\u5668\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose start </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">service name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="stop" tabindex="-1">stop <a class="header-anchor" href="#stop" aria-hidden="true">#</a></h3><p>\u505C\u6B62\u5DF2\u7ECF\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\u7684\u5BB9\u5668\uFF0C\u4F46\u4E0D\u5220\u9664\u5B83\u3002\u901A\u8FC7<code>start</code>\u53EF\u4EE5\u518D\u6B21\u542F\u52A8\u8FD9\u4E9B\u5BB9\u5668\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose stop </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">service name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="images" tabindex="-1">images <a class="header-anchor" href="#images" aria-hidden="true">#</a></h3><p>\u5217\u51FACompose\u6587\u4EF6\u4E2D\u5305\u542B\u7684\u955C\u50CF\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose images</span></span>
<span class="line"></span></code></pre></div><h3 id="scale" tabindex="-1">scale <a class="header-anchor" href="#scale" aria-hidden="true">#</a></h3><p>\u5F39\u6027\u8BBE\u7F6E\u670D\u52A1\u8FD0\u884C\u7684\u5BB9\u5668\u4E2A\u6570\uFF0C\u901A\u8FC7<code>service=num</code>\uFF1B\u9700\u8981\u53BB\u6389\u5728yaml\u6587\u4EF6\u6307\u5B9A\u7684\u7AEF\u53E3\u53F7\uFF0C\u5426\u5219\u4F1A\u5BFC\u81F4\u7AEF\u53E3\u5360\u7528\u95EE\u9898</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose scale web=2 db=3</span></span>
<span class="line"></span></code></pre></div><h3 id="build" tabindex="-1">build <a class="header-anchor" href="#build" aria-hidden="true">#</a></h3><p>\u6784\u5EFA\uFF08\u91CD\u65B0\u6784\u5EFA\uFF09\u9879\u76EE\u4E2D\u7684\u670D\u52A1\u5BB9\u5668\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose build</span></span>
<span class="line"></span></code></pre></div><p>\u6216\u8005\u5355\u72EC\u6784\u5EFA\u67D0\u4E2A\u670D\u52A1\u7684\u5BB9\u5668\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose build </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">service name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="down" tabindex="-1">down <a class="header-anchor" href="#down" aria-hidden="true">#</a></h3><p>\u6B64\u547D\u4EE4\u5C06\u4F1A\u505C\u6B62up\u547D\u4EE4\u6240\u542F\u52A8\u7684\u5BB9\u5668\uFF0C\u5E76\u79FB\u9664\u7F51\u7EDC\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose down</span></span>
<span class="line"></span></code></pre></div><h3 id="up" tabindex="-1">up <a class="header-anchor" href="#up" aria-hidden="true">#</a></h3><p>\u6B64\u547D\u4EE4\u5C06\u81EA\u52A8\u5B8C\u6210\u5305\u62EC\u6784\u5EFA\u955C\u50CF\uFF0C\uFF08\u91CD\u65B0\uFF09\u521B\u5EFA\u670D\u52A1\uFF0C\u542F\u52A8\u670D\u52A1\uFF0C\u5E76\u5173\u8054\u670D\u52A1\u76F8\u5173\u5BB9\u5668\u7684\u4E00\u7CFB\u5217\u64CD\u4F5C\uFF1B\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u8BE5\u547D\u4EE4\u6765\u542F\u52A8\u4E00\u4E2A\u9879\u76EE\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose up</span></span>
<span class="line"></span></code></pre></div><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u542F\u52A8\u7684\u5BB9\u5668\u90FD\u5728\u524D\u53F0\u8FD0\u884C\uFF0C\u4F7F\u7528<code>-d</code>\u53C2\u6570\uFF0C\u5C06\u4F1A\u5728\u540E\u53F0\u542F\u52A8\u5E76\u8FD0\u884C\u6240\u6709\u7684\u5BB9\u5668\uFF0C\u4E00\u822C\u5728\u751F\u4EA7\u73AF\u5883\u4F7F\u7528\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker-compose up -d</span></span>
<span class="line"></span></code></pre></div><h2 id="compose\u6A21\u677F\u6587\u4EF6" tabindex="-1">Compose\u6A21\u677F\u6587\u4EF6 <a class="header-anchor" href="#compose\u6A21\u677F\u6587\u4EF6" aria-hidden="true">#</a></h2><p>Compose\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6<code>docker-compose.yml</code>\u6765\u7BA1\u7406\u591A\u4E2ADocker\u5BB9\u5668\uFF0C\u6A21\u677F\u6587\u4EF6\u4E3B\u8981\u5206\u4E3A3\u4E2A\u90E8\u5206\uFF1A</p><ul><li>service\uFF08\u670D\u52A1\uFF09:\u5728\u5B83\u4E0B\u9762\u53EF\u4EE5\u5B9A\u4E49\u5E94\u7528\u9700\u8981\u7684\u4E00\u4E9B\u670D\u52A1\uFF0C\u6BCF\u4E2A\u670D\u52A1\u90FD\u6709\u81EA\u5DF1\u7684\u540D\u5B57\u3001\u4F7F\u7528\u7684\u955C\u50CF\u3001\u6302\u8F7D\u7684\u6570\u636E\u5377\u3001\u6240\u5C5E\u7684\u7F51\u7EDC\u3001\u4F9D\u8D56\u54EA\u4E9B\u5176\u4ED6\u670D\u52A1\u7B49\u7B49\u3002</li><li>volumes\uFF08\u6570\u636E\u5377\uFF09\uFF1A\u5B9A\u4E49\u6570\u636E\u5377\uFF0C\u7136\u540E\u6302\u8F7D\u5230\u4E0D\u540C\u7684\u670D\u52A1\u4F7F\u7528\u3002</li><li>networks \uFF08\u5E94\u7528\u7F51\u7EDC\uFF09\uFF1A\u5B9A\u4E49\u5E94\u7528\u540D\u5B57\uFF0C\u4F7F\u7528\u7684\u7F51\u7EDC\u7C7B\u578B\u3002</li></ul><p>\u4E0B\u9762\u4ECB\u7ECD\u4E00\u4E9B\u4E3B\u8981\u6307\u4EE4\u7684\u4F7F\u7528\u3002</p><h3 id="version" tabindex="-1">version <a class="header-anchor" href="#version" aria-hidden="true">#</a></h3><p>yarm\u6587\u4EF6\u4E00\u822C\u5F00\u5934\u5C31\u662Fversion\u5B57\u6BB5\uFF0Cversion\u6307\u5B9A\u4E86\u7248\u672C\u4FE1\u606F\uFF0C\u5173\u4E4Edocker\u7684\u517C\u5BB9\u6027\uFF0CCompose\u6587\u4EF6\u683C\u5F0F\u67093\u4E2A\u7248\u672C\uFF0C\u5206\u522B\u4E3A1\uFF0C2.x\u548C3.x\u3002\u4E24\u8005\u7684\u7248\u672C\u8981\u6C42\u5982\u4E0B\u8868\uFF1A</p><table><thead><tr><th>compose\u6587\u4EF6\u683C\u5F0F\u7248\u672C</th><th>docker\u7248\u672C</th></tr></thead><tbody><tr><td>3.4</td><td>17.09.0+</td></tr><tr><td>3.3</td><td>17.06.0+</td></tr><tr><td>3.2</td><td>17.04.0+</td></tr><tr><td>3.1</td><td>1.13.1+</td></tr><tr><td>3.0</td><td>1.13.0+</td></tr><tr><td>2.3</td><td>17.06.0+</td></tr><tr><td>2.2</td><td>1.13.0+</td></tr><tr><td>2.1</td><td>1.12.0+</td></tr><tr><td>2.0</td><td>1.10.0+</td></tr><tr><td>1.0</td><td>1.9.1.+</td></tr></tbody></table><h3 id="image" tabindex="-1">image <a class="header-anchor" href="#image" aria-hidden="true">#</a></h3><p>\u4ECE\u6307\u5B9A\u7684\u955C\u50CF\u4E2D\u542F\u52A8\u5BB9\u5668\uFF0C\u53EF\u4EE5\u662F\u5B58\u50A8\u4ED3\u5E93\u3001\u6807\u7B7E\u4EE5\u53CA\u955C\u50CFID\u3002</p><h3 id="build-1" tabindex="-1">build <a class="header-anchor" href="#build-1" aria-hidden="true">#</a></h3><p>\u6307\u5B9A<code>Dockerfile</code>\u6240\u5728\u6587\u4EF6\u5939\u7684\u8DEF\u5F84\uFF0C\u53EF\u4EE5\u662F\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u4E5F\u53EF\u4EE5\u662F\u76F8\u5BF9docker-compose.yml\u6587\u4EF6\u7684\u8DEF\u5F84</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/path/to/build/dir</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679Cdockerfile\u6587\u4EF6\u540D\u4E0D\u662F\u9ED8\u8BA4\u540D\uFF0C\u9700\u8981\u6307\u5B9A\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">context</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">dockerfile</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Dockerfile-alternate</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">args</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">var1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">var2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528arg\u6307\u4EE4\u6307\u5B9A\u6784\u5EFA\u955C\u50CF\u65F6\u7684\u53D8\u91CF\uFF0C\u8FD9\u91CC\u7684<code>var1</code>\u548C<code>var2</code>\u5C06\u88AB\u53D1\u9001\u5230\u6784\u5EFA\u73AF\u5883\u3002</p><blockquote><p>\u6CE8\u610F\uFF1A\u4EFB\u4F55environment\u4E0Eargs\u53D8\u91CF\u540C\u540D\u7684env\u53D8\u91CF\uFF08\u4F7F\u7528\u5757\u6307\u5B9A\uFF09\u5C06\u8986\u76D6\u8BE5\u53D8\u91CF\u3002</p></blockquote><h3 id="command" tabindex="-1">command <a class="header-anchor" href="#command" aria-hidden="true">#</a></h3><p>\u8986\u76D6\u5BB9\u5668\u542F\u52A8\u540E\u9ED8\u8BA4\u6267\u884C\u7684\u547D\u4EE4\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">echo &quot;hello world&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="links" tabindex="-1">links <a class="header-anchor" href="#links" aria-hidden="true">#</a></h3><p>\u5C06\u6307\u5B9A\u5BB9\u5668\u8FDE\u63A5\u5230\u5F53\u524D\u8FDE\u63A5\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u522B\u540D\uFF0C\u907F\u514Dip\u65B9\u5F0F\u5BFC\u81F4\u7684\u5BB9\u5668\u91CD\u542F\u52A8\u6001\u6539\u53D8\u7684\u65E0\u6CD5\u8FDE\u63A5\u60C5\u51B5\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">links</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis:rd</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis:alpine</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5728web\u5BB9\u5668\u4E2D\u4F7F\u7528<code>rd</code>\u5C31\u80FD\u8BBF\u95EEredis\uFF0C\u800C\u4E0D\u7528ip\u3002</p><h3 id="external-links" tabindex="-1">external_links <a class="header-anchor" href="#external-links" aria-hidden="true">#</a></h3><p>\u94FE\u63A5\u5230<code>docker-compose.yml</code>\u5916\u90E8\u7684\u5BB9\u5668\uFF0C\u751A\u81F3\u5E76\u975ECompose\u7BA1\u7406\u7684\u5916\u90E8\u5BB9\u5668\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">external_links</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis_1</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project_db_1:mysql</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project_db_1:postgresql</span></span>
<span class="line"></span></code></pre></div><h3 id="depends-on" tabindex="-1">depends_on <a class="header-anchor" href="#depends-on" aria-hidden="true">#</a></h3><p>\u89E3\u51B3\u5BB9\u5668\u7684\u4F9D\u8D56\u3001\u542F\u52A8\u5148\u540E\u7684\u95EE\u9898\u3002\u4EE5\u4E0B\u4F8B\u5B50\u4E2D\u4F1A\u5148\u542F\u52A8redis\u548Cdb\u518D\u542F\u52A8web\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">depends_on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">postgres</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u6CE8\u610F\uFF1Aweb\u670D\u52A1\u4E0D\u4F1A\u7B49\u5F85redis db\u300C\u5B8C\u5168\u542F\u52A8\u300D\u4E4B\u540E\u624D\u542F\u52A8\u3002</p></blockquote><h3 id="networks" tabindex="-1">networks <a class="header-anchor" href="#networks" aria-hidden="true">#</a></h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CCompose\u4F1A\u4E3A\u6211\u4EEC\u7684\u5E94\u7528\u8BBE\u7F6E\u4E00\u4E2A\u7F51\u7EDC\uFF0C\u670D\u52A1\u7684\u6BCF\u4E2A\u5BB9\u5668\u90FD\u52A0\u5165\u9ED8\u8BA4\u7F51\u7EDC\uFF0C\u5E76\u4E14\u53EF\u4EE5\u88AB\u8BE5\u7F51\u7EDC\u4E0A\u7684\u5176\u4ED6\u5BB9\u5668\u8BBF\u95EE\u3002</p><p>Compose\u521B\u5EFA\u7684\u7F51\u7EDC\u540D\u79F0\u57FA\u4E8E\u6211\u4EEC\u6240\u5728\u9879\u76EE\u7684<code>\u76EE\u5F55\u540D\u79F0</code>\uFF0C\u6BD4\u5982\u6211\u4EEC\u9879\u76EE\u5728myapp\u76EE\u5F55\u4E0B\uFF0C\u90A3Compose\u4F1A\u521B\u5EFA\u4E00\u4E2A<code>myapp_default</code>\u7F51\u7EDC\u3002</p><p>\u6709\u4E9B\u573A\u666F\u4E0B\uFF0C\u9ED8\u8BA4\u7684\u7F51\u7EDC\u914D\u7F6E\u4E0D\u80FD\u6EE1\u8DB3\u6211\u4EEC\u7684\u9700\u6C42\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7<code>networks</code>\u6307\u4EE4\u914D\u7F6E\u7F51\u7EDC\uFF0C\u901A\u8FC7<code>default</code>\u5BF9\u9ED8\u8BA4\u7684\u7F51\u7EDC\u8FDB\u884C\u914D\u7F6E\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u8FD8\u53EF\u4EE5\u81EA\u5B9A\u4E49\u7F51\u7EDC\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">front</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">back</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis:alpine</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">front</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">postgres</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">back</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">front</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">back</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver_opts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u8FD9\u91CC\u5B9A\u4E49\u4E86front\u548Cback\u4E24\u4E2A\u7F51\u7EDC\uFF0Cweb\u5E94\u7528\u540C\u65F6\u5728\u4E24\u4E2A\u7F51\u7EDC\u4E2D\u5747\u80FD\u8BBF\u95EEredis\u548Cdb\uFF0C\u800Credis\u548Cdb\u5B9E\u73B0\u4E86\u9694\u79BB\u3002<code>driver_opts</code>\u5C06\u9009\u9879\u5217\u8868\u6307\u5B9A\u4E3A\u952E\u503C\u5BF9\u4EE5\u4F20\u9012\u7ED9\u6B64\u7F51\u7EDC\u7684\u9A71\u52A8\u7A0B\u5E8F\u3002</p><p>\u6211\u4EEC\u6709\u65F6\u5019\u4E0D\u9700\u8981\u521B\u5EFA\u65B0\u7684\u7F51\u7EDC\uFF0C\u53EA\u9700\u8981\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC\uFF0C\u53EF\u4EE5\u4F7F\u7528<code>external</code>\u9009\u9879\uFF0C\u6307\u5B9A\u4E00\u4E2A\u5DF2\u7ECF\u5B58\u5728\u7684\u7F51\u7EDC\u540D\u79F0\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">outside</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">outside</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my-existing-network</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u52A0\u5165\u7F51\u7EDC\u65F6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6307\u5B9A\u5BB9\u5668\u7684<code>\u9759\u6001ip\u5730\u5740</code>\uFF0C\u8FD9\u6837\u6211\u4EEC\u5728\u8FDB\u884C\u6570\u636E\u5E93\u8FDE\u63A5\u65F6\uFF0C\u53EF\u4EE5\u4E0D\u7528\u5BB9\u5668\u670D\u52A1\u540D\u79F0\uFF0C\u800C\u76F4\u63A5\u4F7F\u7528ip\u5730\u5740\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">mynet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">ipv4_address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">172.19.0.3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis:alpine</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">mynet</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">ipv4_address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">172.19.0.4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mynet</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ipam</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">subnet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">172.19.0.0/16</span></span>
<span class="line"></span></code></pre></div><h3 id="network-mode" tabindex="-1">network_mode <a class="header-anchor" href="#network-mode" aria-hidden="true">#</a></h3><p>\u8BBE\u7F6E\u7F51\u7EDC\u6A21\u5F0F\u3002\u4F7F\u7528\u548Cdocker run\u7684--network\u53C2\u6570\u4E00\u6837\u7684\u503C\u3002</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">network_mode: &quot;bridge&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">network_mode: &quot;host&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">network_mode: &quot;none&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">network_mode: &quot;service:[service name]&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">network_mode: &quot;container:[container name/id]&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="environment" tabindex="-1">environment <a class="header-anchor" href="#environment" aria-hidden="true">#</a></h3><p>\u5728\u5BB9\u5668\u4E2D\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u7B49\u540C\u4E8E<code>docker run -e VARIABLE=VALUE ...</code></p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MODE</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">development</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">SHOW</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># \u7B49\u540C\u4E8E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MODE=development</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SHOW=&#39;true&#39;</span></span>
<span class="line"></span></code></pre></div><h3 id="env-file" tabindex="-1">env_file <a class="header-anchor" href="#env-file" aria-hidden="true">#</a></h3><p>\u4ECE\u6587\u4EF6\u4E2D\u83B7\u53D6\u73AF\u5883\u53D8\u91CF\uFF0C\u7B49\u540C\u4E8E<code>docker run --env-file ...</code>\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">env_file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">env_file</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./common.env</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./apps/web.env</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/secrets.env</span></span>
<span class="line"></span></code></pre></div><p>\u73AF\u5883\u53D8\u91CF\u6587\u4EF6\u4E2D\u6BCF\u4E00\u884C\u5FC5\u987B\u7B26\u5408\u683C\u5F0F\uFF0C\u652F\u6301<code>#</code>\u5F00\u5934\u7684\u6CE8\u91CA\u884C\u3002</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># common.env: Set development environment</span></span>
<span class="line"><span style="color:#A6ACCD;">PROG_ENV=development</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><blockquote><p>\u5982\u679C\u6709\u53D8\u91CF\u540D\u79F0\u4E0Eenvironment\u6307\u4EE4\u51B2\u7A81\uFF0C\u4EE5environment\u6307\u4EE4\u4E3A\u51C6\u3002</p></blockquote><h3 id="volumes" tabindex="-1">volumes <a class="header-anchor" href="#volumes" aria-hidden="true">#</a></h3><p>volumes\u53EF\u4EE5\u8BBE\u7F6E\u6570\u636E\u5377\u6240\u6302\u8F7D\u8DEF\u5F84\uFF0C\u5B83\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u4E00\u79CD\u65B9\u5F0F\u662F\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u8DEF\u5F84\uFF08HOST:CONTAINER\uFF09\uFF0C\u901A\u8FC7<code>[SOURCE:]TARGET[:MODE]</code>\u683C\u5F0F\uFF0C\u6700\u540E\u7684ro\u7528\u4E8E\u53EA\u8BFB\uFF0Crw\u7528\u4E8E\u8BFB\u5199\uFF08\u9ED8\u8BA4\uFF09\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app/configs</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u968F\u673A\u6570\u636E\u5377</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./configs:/app/configs:ro</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/path/to/logs:/app/logs</span></span>
<span class="line"></span></code></pre></div><p>\u53E6\u4E00\u79CD\u65B9\u5F0F\u76F4\u63A5\u8BBE\u7F6E\u6570\u636E\u5377\u7684\u540D\u79F0\uFF0C\u9700\u8981\u5728\u6587\u4EF6\u4E2D\u914D\u7F6E\u6570\u636E\u5377\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config_data:/app/configs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">config_data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><h3 id="ports" tabindex="-1">ports <a class="header-anchor" href="#ports" aria-hidden="true">#</a></h3><p>\u7AEF\u53E3\u66B4\u9732\u7ED9\u5BBF\u4E3B\u673A\uFF0C\u5982\u679C\u4EC5\u4EC5\u6307\u5B9A\u5BB9\u5668\u7AEF\u53E3\uFF0C\u5BBF\u4E3B\u673A\u5C06\u4F1A\u968F\u673A\u9009\u62E9\u7AEF\u53E3\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u7ED1\u5B9A\u5BB9\u5668\u76843000\u7AEF\u53E3\u5230\u4E3B\u673A\u4EFB\u610F\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8000:8000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">12222:22</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="expose" tabindex="-1">expose <a class="header-anchor" href="#expose" aria-hidden="true">#</a></h3><p>\u66B4\u9732\u7AEF\u53E3\uFF0C\u548Cports\u7684\u533A\u522B\u662F\uFF0Cexpose\u4E0D\u6620\u5C04\u5230\u5BBF\u4E3B\u673A\uFF0C\u53EA\u88AB\u8FDE\u63A5\u7684\u670D\u52A1\u8BBF\u95EE\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">expose</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="dns" tabindex="-1">dns <a class="header-anchor" href="#dns" aria-hidden="true">#</a></h3><p>\u81EA\u5B9A\u4E49DNS\u670D\u52A1\u5668\u3002\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A\u5217\u8868\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">dns</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.8.8.8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">dns</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.8.8.8</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">114.114.114.114</span></span>
<span class="line"></span></code></pre></div><h3 id="restart" tabindex="-1">restart <a class="header-anchor" href="#restart" aria-hidden="true">#</a></h3><p>\u6307\u5B9A\u5BB9\u5668\u9000\u51FA\u540E\u7684\u91CD\u542F\u7B56\u7565\u4E3A\u59CB\u7EC8\u91CD\u542F\u3002\u8BE5\u547D\u4EE4\u5BF9\u4FDD\u6301\u670D\u52A1\u59CB\u7EC8\u8FD0\u884C\u5341\u5206\u6709\u6548\uFF0C\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u63A8\u8350\u914D\u7F6E\u4E3A<code>always</code>\u6216\u8005 <code>unless-stopped</code>\u3002</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"></span></code></pre></div><h1 id="docker\u955C\u50CF\u63A8\u8350" tabindex="-1">docker\u955C\u50CF\u63A8\u8350 <a class="header-anchor" href="#docker\u955C\u50CF\u63A8\u8350" aria-hidden="true">#</a></h1><p>\u4E0B\u9762\u63A8\u8350\u4E00\u4E9B\u7B14\u8005\u5E38\u7528\u7684\u955C\u50CF\u3002</p><h2 id="gitbucket" tabindex="-1">gitbucket <a class="header-anchor" href="#gitbucket" aria-hidden="true">#</a></h2><p>\u5982\u679C\u6211\u4EEC\u81EA\u5DF1\u60F3\u8981\u4E00\u4E2A\u79C1\u6709\u7684git\u5F00\u53D1\u4ED3\u5E93\uFF0C\u6216\u8005\u516C\u53F8\u5C0F\u56E2\u961F\u4F7F\u7528\uFF0Cgitbucket\u662F\u4E00\u4E2A\u4E0D\u9519\u7684\u9009\u62E9\uFF1B\u76F8\u6BD4\u4E8Egitlab\u52A8\u8F84\u5C31\u5360\u7528\u5185\u5B583G\uFF0Cgitbucket\u51E0\u767Emb\u7684\u5927\u5C0F\u5DF2\u7ECF\u662F\u5F88\u5C0F\u5DE7\u8FF7\u4F60\u4E86\uFF0C\u518D\u914D\u4E0A\u76F4\u7537\u822C\u7684\u84DD\u9ED1\u8272\uFF0C\u8BA9\u4EBA\u7B80\u76F4\u3002\u3002\u3002\u3002\u4E0D\u8FC7\u597D\u5728\u4E00\u822C\u6211\u4EEC\u90FD\u662F\u6572\u7684git\u547D\u4EE4\uFF0C\u6240\u4EE5\u4E0D\u7528\u5728\u610F\u4ED6\u7684\u754C\u9762\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run --name git -itd -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/var/gitbucket -p 8080:8080 -p 29418:29418 gitbucket/gitbucket</span></span>
<span class="line"></span></code></pre></div><p><code>8080</code>\u7AEF\u53E3\u662F\u5B83\u7684\u754C\u9762\u7684\u5730\u5740\uFF0C<code>29418</code>\u7AEF\u53E3\u662F\u7ED9git\u901A\u8FC7SSH\u53BB\u94FE\u63A5\u4ED3\u5E93\u7684\uFF0C\u5EFA\u8BAE\u5F00\u542F\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c181bd0fd5104d91a2258cb34d1bbd1f~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="gitbucket"></p><h2 id="filebrowser" tabindex="-1">filebrowser <a class="header-anchor" href="#filebrowser" aria-hidden="true">#</a></h2><p>\u5982\u679C\u4F60\u53D7\u591F\u4E86\u67D0\u7F51\u76D8\u51E0\u5341KB\u7684\u5C0F\u6C34\u7BA1\u901F\u5EA6\uFF0C\u90A3\u4E48<code>filebrowser</code>\u662F\u4F60\u642D\u5EFA\u4E00\u4E2A\u8F7B\u91CF\u7EA7\u7684\u79C1\u6709\u4E91\u76D8\u4E0D\u9519\u7684\u9009\u62E9\u3002\u53E6\u4E00\u6B3E\u7F51\u76D8\u5DE5\u5177nextcloud\u4E5F\u5341\u5206\u7684\u4E0D\u9519\uFF0C\u529F\u80FD\u4E30\u5BCC\u4E14\u5F3A\u5927\uFF0C\u5E26\u6709app\u529F\u80FD\uFF0C\u4E0D\u8FC7\u9700\u8981\u7ED3\u5408\u6570\u636E\u5E93\u4F7F\u7528\uFF0C\u914D\u7F6E\u7565\u5FAE\u7E41\u7410\uFF0C\u559C\u6B22\u6298\u817E\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u81EA\u5DF1\u5C1D\u8BD5\u3002</p><p>filebrowser\u4F7F\u7528\u4E86go\u8BED\u8A00\u7F16\u5199\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u5BF9\u670D\u52A1\u5668\u4E0A\u7684\u6587\u4EF6\u8FDB\u884C\u7BA1\u7406\u3002\u53EF\u4EE5\u662F\u4FEE\u6539\u6587\u4EF6\uFF0C\u6216\u8005\u662F\u6DFB\u52A0\u5220\u9664\u6587\u4EF6\uFF0C\u751A\u81F3\u53EF\u4EE5\u5206\u4EAB\u6587\u4EF6\uFF0C\u662F\u4E00\u4E2A\u5F88\u68D2\u7684\u6587\u4EF6\u7BA1\u7406\u5668\uFF0C\u4F7F\u7528\u975E\u5E38\u7B80\u5355\u65B9\u4FBF\uFF0C\u529F\u80FD\u5F88\u5F3A\u5927\u3002</p><p>\u4F7F\u7528docker\u5B89\u88C5\u4E5F\u5F88\u65B9\u4FBF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u53EA\u6620\u5C04/srv\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -d --restart=always -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/srv -p 8080:80 filebrowser/filebrowser</span></span>
<span class="line"></span></code></pre></div><p>\u518D\u901A\u8FC7nginx\u8F6C\u53D18080\u7AEF\u53E3\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u80FD\u5728\u5916\u7F51\u8BBF\u95EE\u4E86\uFF1Bnginx\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FD8\u9700\u8981\u4FEE\u6539\u4E0A\u4F20\u6587\u4EF6\u7684\u5927\u5C0F\u9650\u5236\uFF0C\u8FD9\u91CC\u6211\u4EEC\u6539\u52302GB\uFF0C\u5927\u90E8\u5206\u7684\u6587\u4EF6\u90FD\u80FD\u4E0A\u4F20\u4E86\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">http{</span></span>
<span class="line"><span style="color:#A6ACCD;">    client_max_body_size 2000M;</span></span>
<span class="line"><span style="color:#A6ACCD;">    client_body_timeout  20m;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4bd67e95f79a4bce9e352b50d6578a86~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="filebrowser"></p><h2 id="scrapyd" tabindex="-1">scrapyd <a class="header-anchor" href="#scrapyd" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u8EAB\u8FB9\u6709\u5F88\u591A\u7684\u722C\u866B\u5E94\u7528\u6848\u4F8B\uFF0C\u6BD4\u5982\u767E\u5EA6\u3001Google\u3001\u5FC5\u5E94\u7B49\u641C\u7D22\u5F15\u64CE\u90FD\u6709\u81EA\u5DF1\u7684\u722C\u866B\uFF0C\u4F1A\u5B9A\u65F6\u6765\u6293\u53D6\u4F60\u7684\u7F51\u7AD9\uFF1B\u518D\u6BD4\u5982\u8FC7\u5E74\u56DE\u5BB6\u9700\u8981\u62A2\u706B\u8F66\u7968\uFF0C\u6211\u4EEC\u7ECF\u5E38\u80FD\u591F\u770B\u5230\u5F88\u591A\u7684\u62A2\u7968\u8F6F\u4EF6\u7B49\uFF0C\u4E5F\u90FD\u662F\u722C\u866B\u7684\u5E94\u7528\uFF1B\u4E0D\u8FC7\u6211\u4EEC\u5728\u7F51\u7EDC\u4E0A\u8086\u610F\u4F7F\u7528\u722C\u866B\u7684\u65F6\u5019\u4E5F\u8981\u6CE8\u610F\u76F8\u5173\u6CD5\u5F8B\u6CD5\u89C4\uFF0C\u6BD5\u7ADF\u4FD7\u8BDD\u8BF4\u5F97\u597D\uFF1A</p><blockquote><p>\u722C\u866B\u5199\u5F97\u597D\uFF0C\u7262\u996D\u5403\u5F97\u9971</p></blockquote><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2be2531124a64049868272010bec7bd4~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u4E0D\u662F\u8BF4\u95EE\u9898\u4E0D\u5927\u4E48"></p><p>Scrapy\u662F\u7531Python\u8BED\u8A00\u5F00\u53D1\u7684\u4E00\u4E2A\u5FEB\u901F\u3001\u9AD8\u5C42\u6B21\u7684\u5C4F\u5E55\u6293\u53D6\u548Cweb\u6293\u53D6\u6846\u67B6\uFF0C\u7528\u4E8E\u6293\u53D6web\u7AD9\u70B9\u5E76\u4ECE\u9875\u9762\u4E2D\u63D0\u53D6\u7ED3\u6784\u5316\u7684\u6570\u636E\uFF0C\u53EA\u9700\u8981\u5B9E\u73B0\u5C11\u91CF\u7684\u4EE3\u7801\uFF0C\u5C31\u80FD\u591F\u5FEB\u901F\u7684\u6293\u53D6\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb49ed0b084440d0aec27e4166a6292b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Scrapy\u722C\u866B\u6D41\u7A0B"></p><p>Scrapy\u722C\u866B\u90E8\u7F72\u9700\u8981\u4F7F\u7528scrapyd\u548Cscrapydweb\uFF0Cscrapyd\u662F\u7531scrapy\u5F00\u53D1\u8005\u5F00\u53D1\u7684\u3001\u901A\u8FC7\u7B80\u5355\u7684JSON API\u6765\u7BA1\u7406\u591A\u4E2A\u9879\u76EE\u7684\u5E94\u7528\uFF1B\u901A\u8FC7docker\u6211\u4EEC\u53EF\u4EE5\u5F88\u8F7B\u677E\u7684\u542F\u52A8\u4E00\u4E2Ascrapyd\u670D\u52A1\u5668\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -d -p 6800:6800 germey/scrapyd</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u7684\u754C\u9762\u6BD4\u8F83\u7B80\u5355\uFF0C\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u7E41\u7410\u7684API\u63A5\u53E3\u6765\u4E0A\u4F20\u9879\u76EE\u3001\u542F\u52A8\u6216\u8005\u505C\u6B62\u9879\u76EE\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abf84645d32b4e8bbecba491daa66308~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Scrapyd\u754C\u9762"></p><p>\u56E0\u6B64Scrapy\u5F00\u53D1\u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E2A\u53EF\u89C6\u5316\u7BA1\u7406\u722C\u866B\u7684web\u5E94\u7528\uFF0C\u540C\u65F6\u652F\u6301Scrapy\u65E5\u5FD7\u5206\u6790\u548C\u53EF\u89C6\u5316\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run --name scrapydweb -e USERNAME admin \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e PASSWORD admin \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e SCRAPYD_SERVERS 127.0.0.1:6800 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -v /etc/timezone:/etc/timezone \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -d scrapydweb:latest</span></span>
<span class="line"></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e81818a1e1424d66a7d66e8a450401dd~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Scrapydweb\u53EF\u89C6\u5316\u754C\u9762"></p><p>\u6211\u4EEC\u5728web\u754C\u9762\u4E0A\u5C31\u53EF\u4EE5\u6E05\u695A\u7684\u770B\u5230\u6BCF\u4E2A\u670D\u52A1\u5668\u8FD0\u884C\u722C\u866B\u7684\u72B6\u6001\u548C\u6570\u91CF\uFF0C\u4EE5\u53CA\u5B9A\u65F6\u542F\u52A8\u722C\u866B\u3002</p><p>Scrapy\u662F\u4E00\u4E2A\u975E\u5E38\u597D\u7528\u7684\u722C\u866B\u6846\u67B6\uFF0C\u5982\u679C\u672C\u6587\u7684\u9605\u8BFB\u91CF\u7A81\u7834\u4E00\u4E07\uFF0C\u540E\u9762\u7B14\u8005\u53EF\u4EE5\u804A\u4E00\u4E0B\u5B83\u7684\u4F7F\u7528\u3002</p><h2 id="chevereto" tabindex="-1">chevereto <a class="header-anchor" href="#chevereto" aria-hidden="true">#</a></h2><p>Chevereto\u662F\u76EE\u524D\u6700\u597D\u7684\u56FE\u5E8A\u4E4B\u4E00\u4E86\u3002\u529F\u80FD\u4E5F\u975E\u5E38\u5F3A\u5927\u3002\u5176\u514D\u8D39\u7248\u548C\u6536\u8D39\u7248\u7684\u533A\u522B\uFF0C\u5728\u4E8E\u6536\u8D39\u7248\u591A\u4E86\u786C\u76D8\u6269\u5C55\uFF0C\u793E\u4EA4\u5206\u4EAB\u529F\u80FD\u548C\u6280\u672F\u652F\u6301\uFF0C\u514D\u8D39\u7248\u7684\u529F\u80FD\u4E5F\u591F\u7528\u4E86\uFF1BChevereto\u4F9D\u8D56\u7684\u73AF\u5883\u5982\u4E0B\uFF1A</p><ul><li>PHP 5.5+</li><li>MySQL 5.0+</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75adf5ff8aec4145aecf22a4243c870c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Chevereto\u754C\u9762"></p><p>\u4F7F\u7528docker\u5B89\u88C5\u7684\u8BDDPHP\u7684\u73AF\u5883\u6211\u4EEC\u5C31\u53EF\u4EE5\u7701\u53BB\u5B89\u88C5\u6B65\u9AA4\u4E86\uFF0C\u9700\u8981\u5B89\u88C5\u4E00\u4E2AMySQL\u7684\u73AF\u5883\uFF0C\u7136\u540E\u901A\u8FC7run\u547D\u4EE4\u8BBE\u7F6EMYSQL\u7684\u73AF\u5883\u53D8\u91CF\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -it -d --name chevereto --restart=always -p 8080:80 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/var/www/html/images \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_HOST=127.0.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_PORT=3306</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_USERNAME=admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_PASSWORD=admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_NAME=chevereto</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -e </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CHEVERETO_DB_PREFIX=chv_</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  nmtan/chevereto</span></span>
<span class="line"></span></code></pre></div><p>Chevereto\u8FD0\u884C\u8D77\u6765\u540E\u6211\u4EEC\u521D\u59CB\u5316\u8BBE\u7F6E\u7BA1\u7406\u5458\u8D26\u53F7\u5BC6\u7801\uFF0C\u7136\u540E\u5728\u8BBE\u7F6E\u4E2D\u4FEE\u6539\u754C\u9762\u4E3A\u4E2D\u6587\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54338dc6942d47e98d48cc05cee4961b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Chevereto\u4FEE\u6539\u4E2D\u6587"></p><p>PHP\u9ED8\u8BA4\u9650\u5236\u4E0A\u4F20\u5927\u5C0F\u4E3A2MB\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u89E3\u9664\u6B64\u9650\u5236\uFF1B\u9996\u5148\u4F7F\u7528<code>cp\u547D\u4EE4</code>\u628A\u5BB9\u5668\u4E2D\u7684<code>.htaccess</code>\u6587\u4EF6\u62F7\u8D1D\u51FA\u6765\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker cp XXXX:/var/www/html/.htaccess ./</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u7F16\u8F91\u6587\u4EF6.htaccess\uFF0C\u8BBE\u7F6E\u6700\u5927\u4E0A\u4F20\u5927\u5C0F\u4E3A\u5927\u4E00\u70B9\u7684\u6570\u503C\uFF0C\u6BD4\u5982\u8FD9\u91CC\u8BBE\u4E3A128MB\uFF0C\u6570\u503C\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u9700\u8981\u8C03\u6574\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">php_value post_max_size 128M</span></span>
<span class="line"><span style="color:#A6ACCD;">php_value upload_max_filesize 128M</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u628A\u6587\u4EF6\u62F7\u8D1D\u56DE\u5BB9\u5668\u7684\u539F\u5904\u5373\u53EF\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker cp ./.htaccess XXXX:/var/www/html/</span></span>
<span class="line"></span></code></pre></div><p>\u6700\u540E\u4E00\u6B65\u6211\u4EEC\u5728\u8BBE\u7F6E\u4E2D\u4FEE\u6539\u4E0A\u4F20\u9650\u5236\uFF0C\u8FDB\u5165Chevereto\uFF0C\u5355\u51FB\u7528\u6237\u540D\u5F39\u51FA\u4E0B\u62C9\u83DC\u5355\uFF0C\u9009\u62E9\u3010\u4EEA\u8868\u76D8\u3011\uFF0C\u7136\u540E\u70B9\u3010\u8BBE\u7F6E\u3011\uFF0C\u5F39\u51FA\u9875\u9762\u4E2D\u9009\u62E9\u3010\u56FE\u7247\u4E0A\u4F20\u3011\uFF0C\u627E\u5230\u3010\u6700\u5927\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u3011\u9009\u9879\uFF0C\u4FEE\u6539\u4E0D\u8D85\u8FC7128\u7684\u6570\u503C\u5373\u53EF\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07f3f362137b4c85934cc2045b5372bb~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u4FEE\u6539\u4E0A\u4F20\u5927\u5C0F"></p><blockquote><p>\u5982\u679C\u6CA1\u6709\u4FEE\u6539.htaccess\u6587\u4EF6\uFF0C\u6700\u540E\u4E00\u4E2A\u6B65\u9AA4\u7684\u8BBE\u7F6E\u8C03\u6574\u662F\u4E0D\u80FD\u8D85\u8FC72MB\u7684\u3002</p></blockquote><p>\u8FD9\u6837\u6211\u4EEC\u7684\u56FE\u5E8A\u5C31\u642D\u5EFA\u4EE5\u53CA\u914D\u7F6E\u5B8C\u6BD5\u4E86\uFF0C\u5176\u4ED6\u4E2A\u6027\u5316\u9700\u8981\u53EF\u4EE5\u5728\u8BBE\u7F6E\u4E2D\u81EA\u884C\u914D\u7F6E\uFF1B\u6211\u4EEC\u53BB\u9996\u9875\u5C31\u80FD\u968F\u610F\u4E0A\u4F20\u548C\u67E5\u770B\u56FE\u7247\u4E86\uFF1B\u901A\u8FC7nginx\u4EE3\u7406\u8F6C\u53D1\u6211\u4EEC\u8FD8\u53EF\u4EE5\u66B4\u9732\u5230\u5916\u7F51\uFF0C\u5C06\u4F60\u7684\u7F8E\u7167\u5206\u4EAB\u7ED9\u597D\u53CB\uFF08\u524D\u63D0\u662F\u6709\u516C\u7F51IP\u6216\u4E91\u670D\u52A1\u5668\uFF09\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a0caf8f5b55146deb77f8a7a470be17b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Chevereto\u9996\u9875"></p><h2 id="portainer" tabindex="-1">portainer <a class="header-anchor" href="#portainer" aria-hidden="true">#</a></h2><p>Portainer\u662F\u4E00\u4E2A\u53EF\u89C6\u5316\u7684Docker\u64CD\u4F5C\u754C\u9762\uFF0C\u63D0\u4F9B\u72B6\u6001\u663E\u793A\u9762\u677F\u3001\u5E94\u7528\u6A21\u677F\u5FEB\u901F\u90E8\u7F72\u3001\u5BB9\u5668\u955C\u50CF\u7F51\u7EDC\u6570\u636E\u5377\u7684\u57FA\u672C\u64CD\u4F5C\uFF08\u5305\u62EC\u4E0A\u4F20\u4E0B\u8F7D\u955C\u50CF\uFF0C\u521B\u5EFA\u5BB9\u5668\u7B49\u64CD\u4F5C\uFF09\u3001\u4E8B\u4EF6\u65E5\u5FD7\u663E\u793A\u3001\u5BB9\u5668\u63A7\u5236\u53F0\u64CD\u4F5C\u3001Swarm\u96C6\u7FA4\u548C\u670D\u52A1\u7B49\u96C6\u4E2D\u7BA1\u7406\u548C\u64CD\u4F5C\u3001\u767B\u5F55\u7528\u6237\u7BA1\u7406\u548C\u63A7\u5236\u7B49\u529F\u80FD\u3002\u529F\u80FD\u5341\u5206\u5168\u9762\uFF0C\u57FA\u672C\u80FD\u6EE1\u8DB3\u4E2D\u5C0F\u578B\u5355\u4F4D\u5BF9\u5BB9\u5668\u7BA1\u7406\u7684\u5168\u90E8\u9700\u6C42\u3002</p><p>\u901A\u8FC7\u4E00\u4E2Arun\u547D\u4EE4\u6211\u4EEC\u5C31\u53EF\u4EE5\u542F\u52A8portainer\uFF0C<code>/var/run/docker.sock</code>\u662F\u7ED1\u5B9A\u5BBF\u4E3B\u673A\u7684docker\u6587\u4EF6\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u76F4\u63A5\u4E0Edocker\u5B88\u62A4\u8FDB\u7A0B\u901A\u4FE1\u8FDB\u884C\u63A5\u53E3\u8C03\u7528\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run --name portainer -d -p 9000:9000 --restart=always \\</span></span>
<span class="line"><span style="color:#A6ACCD;">        -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD:/data</span></span>
<span class="line"><span style="color:#A6ACCD;">        -v /var/run/docker.sock:/var/run/docker.sock \\</span></span>
<span class="line"><span style="color:#A6ACCD;">        portainer/portainer-ce</span></span>
<span class="line"></span></code></pre></div><p>\u5BB9\u5668\u542F\u52A8\u540E\uFF0C\u8BBE\u7F6E\u7BA1\u7406\u5458\u8D26\u53F7\u5BC6\u7801\uFF0C\u8FDB\u5165Portainer\u540E\u53F0\u7BA1\u7406\u754C\u9762\uFF0C\u70B9\u51FBLocal\u73AF\u5883\u5C31\u80FD\u591F\u4F7F\u7528\u4E86\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b13d30a3aa94e2b8640e641d6c8c8dd~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Portainer"></p><p>\u5BB9\u5668\u548C\u955C\u50CF\u7684\u7BA1\u7406\u4E5F\u5F88\u65B9\u4FBF\uFF0C\u5728\u7BA1\u7406\u754C\u9762\u76F4\u63A5\u589E\u5220\u955C\u50CF\u6216\u5BB9\u5668\u5373\u53EF\uFF1B\u521B\u5EFA\u5BB9\u5668\u4E5F\u76F4\u63A5\u53EF\u89C6\u5316\u4E86\uFF0C\u6211\u4EEC\u6253\u5F00\u3010Container\u3011=&gt;\u3010Add container\u3011\uFF0C\u7136\u540E\u8BBE\u7F6E\u5BB9\u5668\u8FD0\u884C\u6240\u9700\u8981\u7684\u53C2\u6570\uFF0C\u6211\u4EEC\u8FD9\u91CC\u4EE5mysql\u4E3A\u4F8B\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9894040dd11f44a08ceff8cef1ec95b9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Portainer\u521B\u5EFA\u5BB9\u5668"></p><p><code>Restart policy</code>\u5EFA\u8BAE\u9009\u62E9Always\uFF0C\u76F8\u5F53\u4E8E\u8BBE\u7F6E<code>--restart=always</code>\uFF0C\u4FDD\u8BC1\u4E86\u5BB9\u5668\u5728\u670D\u52A1\u5668\u91CD\u542F\u540E\u603B\u4F1A\u81EA\u52A8\u91CD\u65B0\u542F\u52A8\u3002</p><h2 id="webssh" tabindex="-1">webssh <a class="header-anchor" href="#webssh" aria-hidden="true">#</a></h2><p>Webssh\u662F\u6307\u901A\u8FC7\u6D4F\u89C8\u5668\u4EE5\u7F51\u9875\u7684\u5F62\u5F0F\u901A\u8FC7SSH\u534F\u8BAE\u8FDC\u7A0B\u8BBF\u95EE\u4EFB\u4F55\u5F00\u542F\u4E86SSH\u670D\u52A1\u7684\u8BBE\u5907\uFF1Bwebssh\u5DE5\u4F5C\u7684\u539F\u7406\u4E5F\u5F88\u7B80\u5355\uFF0C\u5927\u81F4\u5982\u4E0B\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">+---------+     http     +--------+    ssh    +-----------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| browser | &lt;==========&gt; | webssh | &lt;=======&gt; | ssh server|</span></span>
<span class="line"><span style="color:#A6ACCD;">+---------+   websocket  +--------+    ssh    +-----------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5728\u540E\u53F0\u542F\u52A8\u4E00\u4E2Awebssh\u7684\u540E\u7AEF\u670D\u52A1\u5668\uFF08python\u7A0B\u5E8F\u6216\u5176\u4ED6\u8BED\u8A00\u5F00\u53D1\u7684\uFF09\uFF0C\u524D\u7AEF\u6D4F\u89C8\u5668\u901A\u8FC7websocket\u548C\u670D\u52A1\u5668\u8FDB\u884C\u901A\u4FE1\uFF0C\u5C06\u4E00\u4E9B\u547D\u4EE4\u53D1\u9001\u5230webssh\u670D\u52A1\u5668\uFF0Cwebssh\u670D\u52A1\u5668\u518D\u5C06\u63A5\u6536\u547D\u4EE4\u53D1\u9001\u7ED9\u9700\u8981\u901A\u4FE1\u4E14\u5F00\u542F\u4E86ssh\u529F\u80FD\u7684\u670D\u52A1\u5668\u3002</p><p>\u4F7F\u7528Webssh\u7684\u597D\u5904\u662F\uFF1A\u5728\u5B58\u5728\u5821\u5792\u673A\uFF08\u5373\u8DF3\u677F\u673A\uFF09\u7684\u73AF\u5883\u4E0B\uFF0C\u5982\u679C\u5821\u5792\u673A\u672C\u8EAB\u6709\u5F00\u542Fweb\u670D\u52A1\u7684\u8BDD\uFF0C\u90A3\u53EF\u4EE5\u5728\u5821\u5792\u673A\u4E0A\u90E8\u7F72webssh\uFF0C\u8FD9\u65F6\u4E0D\u7528\u901A\u8FC7SSH\u6216\u8005RDP\u8BBF\u95EE\u5821\u5792\u673A\uFF0C\u76F4\u63A5\u6253\u5F00\u6D4F\u89C8\u5668\u5C31\u80FD\u4EE5web\u5F62\u5F0F\u901A\u8FC7\u5821\u5792\u673A\u6765SSH\u8FDC\u7A0B\u8BBF\u95EE\u7F51\u7EDC\u8BBE\u5907\uFF0C\u8FD9\u5728\u4E00\u4E9B\u5185\u7F51\u9632\u706B\u5899\u4E0D\u5141\u8BB8SSH\uFF0C\u4F46\u662F\u5141\u8BB8HTTP\u548CHTTPS\u7684\u73AF\u5883\u4E2D\u5F88\u5B9E\u7528\u3002\u800C\u4E14\u514D\u53BB\u4E86\u5B89\u88C5putty\u3001secureCRT\u7B49SSH client\u8F6F\u4EF6\u7684\u5FC5\u8981\u3002</p><p>\u901A\u8FC7docker\u8FD0\u884Cwebssh\u670D\u52A1\u5668\u4E5F\u5F88\u7B80\u5355\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run -itd --name webssh --restart=always -p 8888:8888 webssh</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EEwebssh\u670D\u52A1\u5668IP+8888\u7AEF\u53E3\u53F7\u5C31\u53EF\u4EE5\u8FDB\u5165\u5B83\u7684\u754C\u9762\u4E86\uFF0C\u5B83\u7684\u754C\u9762\u4E5F\u5F88\u7B80\u6D01\uFF0C\u751A\u81F3\u6709\u7740\u4E00\u4E1D\u4E1D\u7684\u7B80\u964B\uFF0C\u4E0D\u8FC7\u90E8\u7F72\u5230\u5821\u5792\u673A\u80FD\u7528\u5C31\u884C\uFF0C\u8FD8\u8981\u5565\u81EA\u884C\u8F66\u554A\u3002\u901A\u8FC7\u586B\u5199\u5821\u5792\u673A\u7684hostname\u3001\u7AEF\u53E3\u7B49\u53C2\u6570\u5C31\u80FD\u8FDE\u63A5\u5821\u5792\u673Assh\u4E86\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c97d227df41b411c84dadbea7720c034~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="webssh\u754C\u9762"></p><h2 id="wizserver" tabindex="-1">wizserver <a class="header-anchor" href="#wizserver" aria-hidden="true">#</a></h2><p>\u4E3A\u77E5\u7B14\u8BB0\u662F\u4E00\u6B3E\u8001\u724C\u7B14\u8BB0\u5E94\u7528\u4E86\uFF0C\u652F\u6301markdown\u3001\u7F51\u9875\u7B14\u8BB0\u3001\u7F51\u9875\u526A\u85CF\u548C\u5206\u4EAB\u7B49\u591A\u529F\u80FD\uFF0C\u6700\u8FD1\u63A8\u51FA\u4E86docker\u79C1\u6709\u5316\u90E8\u7F72\u7684\u529F\u80FD\uFF0C\u540C\u65F6\u652F\u63015\u4E2A\u7528\u6237\uFF0C\u9002\u5408\u5C0F\u56E2\u961F\u4F7F\u7528\u3002</p><p>\u6211\u4EEC\u65B0\u5EFA\u4E00\u4E2Awiznote\u76EE\u5F55\uFF0C\u7528\u4E8E\u4FDD\u5B58\u7B14\u8BB0\u7684\u5185\u5BB9\uFF0C\u7136\u540Erun\u542F\u52A8\u670D\u52A1\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker run --name wiz \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    --restart=always -itd \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD/wiznote:/wiz/storage \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -p 8080:80 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    -p 9269:9269/udp \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    wiznote/wizserver</span></span>
<span class="line"></span></code></pre></div><p>\u7A0D\u7B49\u51E0\u5206\u949F\u5C31\u80FD\u770B\u5230\u670D\u52A1\u542F\u52A8\u4E86\uFF0C\u5728\u672C\u5730\u6253\u5F00localhost:8080\u6253\u5F00\u4E3B\u754C\u9762\uFF0C\u9ED8\u8BA4\u7BA1\u7406\u5458\u8D26\u53F7\uFF1A<a href="https://link.juejin.cn/?target=mailto%3Aadmin%40wiz.cn" target="_blank" rel="noopener noreferrer">admin@wiz.cn</a>\u548C\u5BC6\u7801123456\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dd9348b76064b2ba09374ce669492de~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u4E3A\u77E5\u7B14\u8BB0"></p><p>\u4E3A\u77E5\u7B14\u8BB0\u652F\u6301\u591A\u5E73\u53F0\u5BA2\u6237\u7AEF\u548C\u79FB\u52A8\u7AEF\u5BA2\u6237\u7AEF\uFF0C\u6211\u4EEC\u5728\u5BA2\u6237\u7AEF\u754C\u9762\u70B9\u51FB\u3010\u5207\u6362\u670D\u52A1\u5668\u3011\uFF0C\u9009\u62E9\u3010\u4F01\u4E1A\u79C1\u6709\u670D\u52A1\u5668\u3011\uFF0C\u8F93\u5165\u670D\u52A1\u5668\u7684ip\u5730\u5740\u53CA\u7AEF\u53E3\u53F7\u5C31\u80FD\u767B\u5F55\u79C1\u6709\u670D\u52A1\u5668\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcd8e6573c48477f9bcca9887bbf0ddb~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u79C1\u6709\u670D\u52A1\u5668"></p><h2 id="jellyfin" tabindex="-1">jellyfin <a class="header-anchor" href="#jellyfin" aria-hidden="true">#</a></h2><p>Jellyfin\u662F\u4E00\u4E2A\u81EA\u7531\u7684\u8F6F\u4EF6\u5A92\u4F53\u7CFB\u7EDF\uFF0C\u7528\u4E8E\u7BA1\u7406\u5A92\u4F53\u548C\u63D0\u4F9B\u5A92\u4F53\u670D\u52A1\uFF0C\u5C55\u793A\u4F60\u81EA\u5DF1\u7684\u7535\u5F71\u3001\u7535\u89C6\u5267\u3001\u97F3\u4E50\u7B49\u591A\u5A92\u4F53\u6570\u636E\uFF0C\u5E76\u63D0\u4F9B\u591A\u5E73\u53F0\u8BBF\u95EE\u64AD\u653E\u670D\u52A1\u3002\u901A\u8FC7docker\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5F88\u65B9\u4FBF\u7684\u542F\u52A8\u5B83\u7684\u670D\u52A1\uFF1B\u5728\u672C\u5730\u521B\u5EFAmedia\u548Cconfig\u6587\u4EF6\u5939\uFF0Cmedia\u6587\u4EF6\u5939\u662F\u5A92\u4F53\u6587\u4EF6\u5939\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6839\u636E\u9700\u6C42\u7EE7\u7EED\u521B\u5EFAmedia/movie\u3001media/music\u7B49\u6587\u4EF6\u5939\u5B58\u653E\u4E0D\u540C\u5A92\u4F53\u8D44\u6E90\uFF1A</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d --name jellyfin \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -p 8096:8096 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD/media:/media \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PWD/config:/config \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  --restart=always \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  jellyfin/jellyfin</span></span>
<span class="line"></span></code></pre></div><p>\u7ED1\u5B9A\u4E0D\u540C\u7AEF\u53E3\u8BF4\u660E\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u7AEF\u53E3</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>8096</td><td>WebUI \u8BBF\u95EE\u7AEF\u53E3</td></tr><tr><td>7359/udp</td><td>\uFF08\u53EF\u9009\uFF09\u5141\u8BB8\u672C\u5730\u7F51\u7EDC\u7684\u5BA2\u6237\u7AEF\u53D1\u73B0 Jellyfin</td></tr><tr><td>1900/udp</td><td>\uFF08\u53EF\u9009\uFF09DLNA\u670D\u52A1</td></tr></tbody></table><p>\u5BB9\u5668\u521B\u5EFA\u540E\uFF0C\u6211\u4EEC\u6253\u5F00localhost:8096\u5C31\u80FD\u6253\u5F00\u5B89\u88C5\u5411\u5BFC\u9875\u9762\uFF0C\u5B83\u7684\u754C\u9762\u8FD8\u662F\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/295b1cdd4771400bbf3f36b2d76637a8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="jellyfin\u5B89\u88C5"></p><p>\u9009\u62E9\u4E00\u7CFB\u5217\u7684\u8BED\u8A00\u3001\u56FD\u5BB6\uFF08\u56FD\u5BB6\u9009\u62E9<code>People&#39;s Republic of China</code>\uFF09\u4EE5\u53CA\u914D\u7F6E\u8D26\u53F7\u5BC6\u7801\u540E\u6211\u4EEC\u5C31\u8FDB\u5165\u5B83\u7684\u9996\u9875\u4E86\uFF1B\u6211\u4EEC\u9009\u62E9\u3010\u6DFB\u52A0\u5A92\u4F53\u5E93\u3011\uFF0C\u9009\u62E9\u4F60media\u6587\u4EF6\u5939\u4E0B\u7684\u5B50\u6587\u4EF6\u5939\uFF0C\u5C31\u80FD\u770B\u5230\u5176\u4E0B\u9762\u7684\u5A92\u4F53\u6587\u4EF6\u4E86\uFF1A</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a45e33f128a24030831054130689a957~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="\u6DFB\u52A0\u5A92\u4F53\u5E93"></p><h2 id="aria2" tabindex="-1">aria2 <a class="header-anchor" href="#aria2" aria-hidden="true">#</a></h2><p>Aria2\u662F\u4E00\u6B3E\u5F00\u6E90\u4E0B\u8F7D\u5DE5\u5177\uFF0C\u53EF\u5E2E\u52A9\u7B80\u5316\u4E0D\u540C\u8BBE\u5907\u548C\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u4E0B\u8F7D\u8FC7\u7A0B\u3002\u5B83\u652F\u6301\u78C1\u529B\u94FE\u63A5\u3001BT\u79CD\u5B50\u3001http\u7B49\u7C7B\u578B\u7684\u6587\u4EF6\u4E0B\u8F7D\uFF0C\u4E0E\u8FC5\u96F7\u53CAQQ\u65CB\u98CE\u76F8\u6BD4\uFF0CAria2\u6709\u7740\u4F18\u79C0\u7684\u6027\u80FD\u53CA\u8F83\u4F4E\u7684\u8D44\u6E90\u5360\u7528\uFF0C\u67B6\u6784\u672C\u8EAB\u975E\u5E38\u8F7B\u5DE7\uFF0C\u901A\u5E38\u53EA\u9700\u89814\u5146\u5B57\u8282\uFF08HTTP\u4E0B\u8F7D\uFF09\u52309\u5146\u5B57\u8282\uFF08\u7528\u4E8EBitTorrent\u4EA4\u4E92\uFF09\u4E4B\u95F4\u3002</p><p>\u53E6\u5916\uFF0Caria2\u7531\u4E8E\u5B83\u7684\u5F00\u6E90\u7279\u6027\uFF0C\u56E0\u6B64\u4E5F\u7528\u5728\u5F88\u591A\u79BB\u7EBF\u4E0B\u8F7D\u7684\u573A\u666F\uFF0C\u6BD4\u5982\u5F88\u591A\u8DEF\u7531\u5668\u90FD\u652F\u6301aria2\u79BB\u7EBF\u4E0B\u8F7D\u529F\u80FD\uFF0C\u6211\u4EEC\u5728\u8DEF\u7531\u5668\u7684\u63D2\u4EF6\u5E02\u573A\u4E2D\u5B89\u88C5aria2\u540E\uFF0C\u5728\u8DEF\u7531\u5668\u6302\u8F7Du\u76D8\uFF0C\u4E0A\u73ED\u7684\u65F6\u5019\u60F3\u8981\u4E0B\u8F7D\u7684\u7535\u5F71\u3001\u89C6\u9891\u7B49\u94FE\u63A5\u4E22\u7ED9\u5B83\uFF0C\u56DE\u5230\u5BB6\u5C31\u53EF\u4EE5\u76F4\u63A5\u89C2\u770B\u4E86\uFF1B\u987A\u5E26\u63D0\u4E00\u4E0B\uFF0Cchrome\u6D4F\u89C8\u5668\u914D\u5408\u6CB9\u7334\u63D2\u4EF6\u76F4\u63A5\u6109\u5FEB\u7684\u79BB\u7EBF\u4E0B\u8F7D\u767E\u5EA6\u7F51\u76D8\u7684\u6587\u4EF6\u3002</p><p>\u6211\u4EEC\u901A\u8FC7docker\u6765\u5B89\u88C5aria2\u5341\u5206\u65B9\u4FBF\uFF0C\u65B0\u5EFA\u4E00\u4E2A<code>aria2-downloads</code>\u6587\u4EF6\u5939\u6620\u5C04\u4E0B\u8F7D\u7684\u76EE\u5F55\uFF0C<code>aria2-config</code>\u6587\u4EF6\u5939\u6620\u5C04\u914D\u7F6E\u7684\u76EE\u5F55\u3002\u8FD9\u91CC\u7684<code>p3terx/aria2-pro</code>\u955C\u50CF\u5C31\u662F\u6211\u4EECaria2\u4E0B\u8F7D\u7684\u4E3B\u7A0B\u5E8F\uFF0C\u5B83\u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u7684\u7A0B\u5E8F\uFF0C\u56E0\u6B64\u642D\u914D<code>p3terx/ariang</code>\u955C\u50CF\u4F5C\u4E3A\u5B83\u7684\u53EF\u89C6\u5316\u7BA1\u7406\u754C\u9762\u3002\u7528\u5230\u4E86\u591A\u4E2A\u955C\u50CF\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7docker compose\u6765\u8FDB\u884C\u6784\u5EFA\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">aria2-pro</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">aria2-pro</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">p3terx/aria2-pro</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># uid\uFF0C\u8FD9\u91CC\u9ED8\u8BA4\u662Fnobody</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PUID=65534</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># gid\uFF0C\u8FD9\u91CC\u9ED8\u8BA4\u662Fnobody</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PGID=65534</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u6743\u9650\u63A9\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">UMASK_SET=022</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># rpc\u5BC6\u94A5token</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">RPC_SECRET=123456</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># rpc\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">RPC_PORT=6800</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># BT\u76D1\u542C\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">LISTEN_PORT=6888</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u7F13\u5B58</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">DISK_CACHE=64M</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">IPV6_MODE=false</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u81EA\u52A8\u66F4\u65B0tracker</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">UPDATE_TRACKERS=true</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CUSTOM_TRACKER_URL=</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TZ=Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">network_mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u6620\u5C04\u914D\u7F6E\u76EE\u5F55\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55\u7684aria2-confg</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${PWD}/aria2-config:/config</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u6620\u5C04\u4E0B\u8F7D\u76EE\u5F55\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u76EE\u5F55\u7684aria2-downloads</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${PWD}/aria2-downloads:/downloads</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">6800:6800</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">6888:6888</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">6888:6888/udp</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unless-stopped</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">logging</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">json-file</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">max-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">1m</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ariang</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ariang</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">p3terx/ariang</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">network_mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u7AEF\u53E3\u6620\u5C04\uFF0C\u9ED8\u8BA46880\uFF0C\u540E\u9762\u901A\u8FC7\u6B64\u7AEF\u53E3\u8BBF\u95EE\u9875\u9762</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">6880:6880</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unless-stopped</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">logging</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">json-file</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">max-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">1m</span></span>
<span class="line"></span></code></pre></div><p>\u9879\u76EE\u542F\u52A8\u540E\uFF0C\u6211\u4EEC\u6253\u5F00AriaNg\u7684\u7BA1\u7406\u754C\u9762\uFF0C\u5728\u8BBE\u7F6E\u4E2D\u914D\u7F6Eyarml\u6587\u4EF6\u4E2D\u7684RPC\u7AEF\u53E3\uFF08\u9ED8\u8BA46800\uFF09\u548CRPC\u5BC6\u94A5\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a92101295e6433d819ce5e8c539b34c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="aria2\u914D\u7F6E"></p><p>\u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u70B9\u51FB\u3010\u65B0\u5EFA\u3011\uFF0C\u8F93\u5165\u4F60\u7684\u4E0B\u8F7D\u94FE\u63A5\u5C31\u53EF\u4EE5\u6109\u5FEB\u5730\u7B49\u5F85\u4E86\u3002</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b56ad2541a146e3a95ec90503ce0404~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="aria2\u4E0B\u8F7D"></p><p>\u4E0B\u8F7D\u901F\u5EA6\u548C\u4F60\u7684\u5B9E\u9645\u5E26\u5BBD\u4EE5\u53CA\u8D44\u6E90\u60C5\u51B5\u7B49\u90FD\u6709\u5173\u7CFB\uFF0C\u4E0A\u56FE\u4EC5\u505A\u5C55\u793A\u3002</p><p>\u5982\u679C\u89C9\u5F97\u5199\u5F97\u8FD8\u4E0D\u9519\uFF0C\u656C\u8BF7\u5173\u6CE8\u6211\u7684<a href="https://juejin.im/user/580038cebf22ec0064bd0b2d" target="_blank" rel="noopener noreferrer">\u6398\u91D1\u4E3B\u9875</a>\u3002\u66F4\u591A\u6587\u7AE0\u8BF7\u8BBF\u95EE<a href="https://link.juejin.cn/?target=https%3A%2F%2Fxieyufei.com" target="_blank" rel="noopener noreferrer">\u8C22\u5C0F\u98DE\u7684\u535A\u5BA2</a></p>`,288),o=[e];function c(r,t,y,i,D,C){return n(),a("div",null,o)}var F=s(l,[["render",c]]);export{A as __pageData,F as default};
