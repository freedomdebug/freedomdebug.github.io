import{_ as s,c as e,o as a,a as n}from"./app.89e845e1.js";const C=JSON.parse('{"title":"99% \u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684 babel \u77E5\u8BC6","description":"","frontmatter":{},"headers":[{"level":2,"title":"99% \u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684 babel \u77E5\u8BC6","slug":"_99-\u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684-babel-\u77E5\u8BC6"},{"level":3,"title":"@babel/preset-env","slug":"babel-preset-env"},{"level":3,"title":"@babel/plugin-transform-runtime","slug":"babel-plugin-transform-runtime"},{"level":3,"title":"@babel/runtime","slug":"babel-runtime"},{"level":3,"title":"core-js","slug":"core-js"},{"level":3,"title":"@babel/polyfills","slug":"babel-polyfills"},{"level":3,"title":"babel-polyfills","slug":"babel-polyfills-1"}],"relativePath":"files/pack/\u767E\u5206\u4E4B99\u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684babel\u77E5\u8BC6.md"}'),l={name:"files/pack/\u767E\u5206\u4E4B99\u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684babel\u77E5\u8BC6.md"},o=n(`<h2 id="_99-\u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684-babel-\u77E5\u8BC6" tabindex="-1">99% \u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684 babel \u77E5\u8BC6 <a class="header-anchor" href="#_99-\u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684-babel-\u77E5\u8BC6" aria-hidden="true">#</a></h2><p><strong>\u56F0\u6270</strong></p><p>\u4F5C\u4E3A\u5DE5\u5177\u5F00\u53D1\u8005\uFF0Cbabel \u5173\u8054\u95EE\u9898\u662F\u96BE\u7ED5\u8FC7\u53BB\u7684\u780D\u3002</p><p>\u5728 babel@6 \u65F6\u5019\uFF0C\u6700\u5E38\u6536\u5230\u53CD\u9988\u4E4B\u4E00\u5C31\u662F <code>regeneratorRuntime is not defined</code></p><p>\u800C\u5230\u4E86 babel@7\uFF0C\u6700\u5E38\u6536\u5230\u53CD\u9988\u4E4B\u4E00 <code>Cannot find module &#39;core-js/library/fn/**&#39;.</code></p><p>\u90A3\u662F\u4EC0\u4E48\u95EE\u9898\u5BFC\u81F4\u8FD9\u4E9B\u95EE\u9898\u7684\u51FA\u73B0\u5462\uFF0C\u6211\u89C9\u5F97\u6709\u4E00\u4E2A issue \u7279\u522B\u80FD\u4EE3\u8868\u8FD9\u4E00\u7C7B\u7684\u5F00\u53D1\u8005\u3002<code>\u5927\u5BB6\u4E0D\u8981\u7B11\uFF0C\u6211\u4EEC\u5185\u90E8\u4E00\u4E9B\u57FA\u7840\u6A21\u5757\u4E5F\u6709\u8FD9\u4E2A\u95EE\u9898</code></p><blockquote><p><a href="https://github.com/raisezhang/react-drag-listview/issues/44#issuecomment-751662527" target="_blank" rel="noopener noreferrer">https://github.com/raisezhang/react-drag-listview/issues/44#issuecomment-751662527</a></p></blockquote><p><strong>\u603B\u7ED3\u6765\u8BB2\uFF1ABabel \u5728\u7F16\u8BD1\u5927\u5BB6\u7684\u4EE3\u7801\u65F6\u5019\uFF0C\u4F1A\u4F9D\u636E\u5927\u5BB6\u914D\u7F6E\u7684 preset or plugin \u6CE8\u5165\u4E00\u4E9B\u6A21\u5757\u4F9D\u8D56\uFF0C\u800C\u8FD9\u4E9B\u6A21\u5757\u4F9D\u8D56\u662F\u5927\u5BB6\u9700\u8981\u5728</strong> <strong><code>pkg.dependencies</code>\xA0\u91CC\u9762\u4F53\u73B0\u51FA\u6765\u7684\uFF0C\u5426\u5219\u5F88\u53EF\u80FD\u51FA\u73B0\u7684\u95EE\u9898\u5C31\u662F\u52A0\u8F7D\u4E0D\u5230\u5177\u4F53\u7684\u6587\u4EF6\u6216\u8005\u52A0\u8F7D\u9519\u8BEF\u7684\u7248\u672C\u7684\u6587\u4EF6\u3002</strong></p><p>\u6839\u672C\u7684\u539F\u56E0\u662F\u4EC0\u4E48\uFF1A\u5176\u5B9E\u5927\u5BB6\u5BF9</p><ul><li><p><code>@babel/preset-env</code></p></li><li><p><code>@babel/plugin-transform-runtime</code></p></li><li><p><code>@babel/runtime</code></p></li><li><p><code>core-js</code></p></li><li><p><code>@babel/polyfills</code></p></li><li><p><code>babel-polyfills</code></p></li></ul><p>\u7B49\u7B49\u8FD9\u4E9B\u719F\u6089\u4F46\u53C8\u964C\u751F\u7684\u539F\u56E0\u3002</p><p>\u90A3\u4ECA\u5929\u6211\u60F3\u5927\u6982\u548C\u5927\u5BB6\u5206\u4EAB\u4E00\u4E0B\u4F7F\u7528 <code>babel@7</code> \u7684\u5FC3\u5F97\uFF0C\u5982\u6709\u4E0D\u5BF9\uFF0C\u6B22\u8FCE\u5927\u5BB6\u53CA\u65F6\u6307\u51FA\u3002</p><p><strong>\u9884\u5907\u77E5\u8BC6</strong></p><p>\u5F00\u8BB2\u4E4B\u524D\u6211\u4EEC\u6709\u5FC5\u8981\u5148\u6765\u770B\u770B\u5404\u4E2A\u5305\u5230\u5E95\u662F\u5E72\u5565\u7684\u3002</p><h3 id="babel-preset-env" tabindex="-1"><code>@babel/preset-env</code> <a class="header-anchor" href="#babel-preset-env" aria-hidden="true">#</a></h3><p>\u5728 <code>babel@7</code> \u63A8\u51FA\u4E4B\u9645\uFF0Cbabel \u5B98\u65B9\u628A babel preset stage \u4EE5\u53CA es2015 es2016 \u7B49\u7B49\u90FD\u5E9F\u5F03\u4E86\uFF0C\u53D6\u800C\u4EE3\u4E4B\u7684\u662F <code>@babel/preset-env</code>\u3002</p><blockquote><p>@babel/preset-env is a smart preset that allows you to use the latest JavaScript without needing to micromanage which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s). This both makes your life easier and JavaScript bundles smaller!</p><p>\u5B98\u65B9\u6587\u6863\uFF1A<a href="https://babeljs.io/docs/en/babel-preset-env.html" target="_blank" rel="noopener noreferrer">https://babeljs.io/docs/en/babel-preset-env.html</a></p></blockquote><p>\u901A\u8FC7\u5B98\u65B9\u6587\u6863\u7684\u63CF\u8FF0\uFF0Cpreset-env \u4E3B\u8981\u505A\u7684\u662F\u8F6C\u6362 JavaScript \u6700\u65B0\u7684 Syntax\uFF08\u6307\u7684\u662F <code>const</code>\xA0<code>let</code>\xA0<code>...</code> \u7B49\uFF09\uFF0C \u800C\u4F5C\u4E3A\u53EF\u9009\u9879 preset-env \u4E5F\u53EF\u4EE5\u8F6C\u6362 JavaScript \u6700\u65B0\u7684 API \uFF08\u6307\u7684\u662F\u6BD4\u5982 \u6570\u7EC4\u6700\u65B0\u7684\u65B9\u6CD5 filter \u3001includes\uFF0CPromise \u7B49\u7B49\uFF09\u3002</p><p>\u8FD9\u91CC\u7EC6\u5FC3\u7684\u540C\u5B66\u4F30\u8BA1\u53D1\u73B0\u4E86\u6211\u523B\u610F\u5728\u5F3A\u8C03 Syntax \u548C API, \u662F\u7684\uFF0Cbabel \u5728\u5B9E\u73B0\u7F16\u8BD1 \u6216\u8005\u6211\u4EEC\u5728\u7EC4\u5408\u4F7F\u7528\u5404\u4E2A preset \u6216\u8005 plugin \u65F6\uFF0C\u5176\u5B9E\u6709\u9690\u542B\u8FD9\u4E00\u5C42\u7684\u5173\u7CFB\u7684\uFF0C\u540C\u65F6\u8FD9\u91CC\u4E5F\u6709\u4E00\u4E9B\u5386\u53F2\u80CC\u666F\uFF0C\u4E3A\u4E86\u4E0D\u7ED9\u5927\u5BB6\u589E\u52A0\u8D1F\u62C5\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u70B9\u5230\u4E3A\u6B62\u5C31\u597D\uFF0C\u9700\u8981\u4E86\u89E3\u7684\u81EA\u884C\u6DF1\u6316\u4E5F\u884C\u3002</p><p>\u8BF4\u5230\u8FD9\uFF0C\u6211\u9700\u8981\u7ED9\u5927\u5BB6\u4E00\u4E9B tips:</p><ul><li><p>\u5728 babel@6 \u5E74\u4EE3\uFF0C\u6211\u4EEC\u4F7F\u7528\u7684\u662F stage\uFF0C\u90A3 stage \u5176\u5B9E\u53EA\u4F1A\u7FFB\u8BD1 Syntax\uFF0C\u800C API \u5219\u4EA4\u7ED9 babel-plugin-transform-runtime \u6216\u8005 babel-polyfill \u6765\u5B9E\u73B0\u3002\uFF08\u8FD9\u4E5F\u662F\u4E3A\u4EC0\u4E48\u5927\u5BB6\u5728\u8001\u9879\u76EE\u4E2D\u53EF\u4EE5\u770B\u5230\u6709\u5F15\u5165 babel-polyfill \u7684\u539F\u56E0\uFF09</p></li><li><p>\u5728 babel@7 \u5E74\u4EE3\uFF0C\u6211\u4EEC\u5E9F\u5F03\u4E86 stage\uFF0C\u4F7F\u7528\u7684 preset-env\uFF0C\u540C\u65F6\u4ED6\u4E5F\u53EF\u4EE5\u63D0\u4F9B polyfill \u7684\u80FD\u529B</p></li></ul><p>\u7EFC\u4E0A\u6211\u60F3\u5C0F\u4F19\u4F34\u4EEC\u4F1A\u6709\u51E0\u4E2A\u56F0\u60D1</p><ul><li><p>preset-env \u5982\u4F55\u51CF\u5C0F\u5305\u4F53\u79EF\u7684</p></li><li><p>\u6709 preset-env polyfill \u80FD\u529B\u4E86\uFF0C\u4E3A\u5565\u8FD8\u8981\u6709 @babel/plugin-transform-runtime\uFF0C\u8FD9\u8D27\u662F\u5FC5\u987B\u7684\u5417\uFF1F</p></li><li><p>\u6709\u4E86 preset-env polyfill \u80FD\u529B\u4E86\uFF0C\u6211\u8FD8\u8981 @babel/polyfill \u5417</p></li></ul><p>\u8981\u89E3\u91CA\u6E05\u695A\u8FD9\u51E0\u4E2A\u95EE\u9898\uFF0C\u9996\u5148\u9700\u8981\u5927\u6982\u77E5\u9053 preset-env \u7684\u4E09\u4E2A\u5173\u952E\u53C2\u6570</p><p>**targets(**<a href="https://babeljs.io/docs/en/babel-preset-env.html#targets" target="_blank" rel="noopener noreferrer">https://babeljs.io/docs/en/babel-preset-env.html#targets</a>):</p><blockquote><p>Describes the environments you support/target for your project.</p></blockquote><p>\u7B80\u5355\u8BB2\uFF0C\u8BE5\u53C2\u6570\u51B3\u5B9A\u4E86\u6211\u4EEC\u9879\u76EE\u9700\u8981\u9002\u914D\u5230\u7684\u73AF\u5883\uFF0C\u6BD4\u5982\u53EF\u4EE5\u7533\u660E\u9002\u914D\u5230\u7684\u6D4F\u89C8\u5668\u7248\u672C\uFF0C\u8FD9\u6837 babel \u4F1A\u6839\u636E\u6D4F\u89C8\u5668\u7684\u652F\u6301\u60C5\u51B5\u81EA\u52A8\u5F15\u5165\u6240\u9700\u8981\u7684 polyfill\u3002</p><p><strong>useBuiltIns</strong>(<a href="https://babeljs.io/docs/en/babel-preset-env.html#usebuiltins" target="_blank" rel="noopener noreferrer">https://babeljs.io/docs/en/babel-preset-env.html#usebuiltins</a>):</p><p>&quot;usage&quot; | &quot;entry&quot; | false, defaults to false</p><blockquote><p>This option configures how @babel/preset-env handles polyfills.</p></blockquote><p>\u8FD9\u4E2A\u53C2\u6570\u51B3\u5B9A\u4E86 preset-env \u5982\u4F55\u5904\u7406 polyfills\u3002</p><p><code>false</code>: \u8FD9\u79CD\u65B9\u5F0F\u4E0B\uFF0C\u4E0D\u4F1A\u5F15\u5165 polyfills\uFF0C\u4F60\u9700\u8981\u4EBA\u4E3A\u5728\u5165\u53E3\u6587\u4EF6\u5904<code>@import &#39;@babel/polyfill&#39;;</code></p><p>\u4F46\u5982\u4E0A\u8FD9\u79CD\u65B9\u5F0F\u5728 <code>@babel@7.4</code> \u4E4B\u540E\u88AB\u5E9F\u5F03\u4E86\uFF0C\u53D6\u800C\u4EE3\u4E4B\u7684\u662F\u5728\u5165\u53E3\u6587\u4EF6\u5904\u81EA\u884C import \u5982\u4E0B\u4EE3\u7801</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import &#39;core-js/stable&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">import &#39;regenerator-runtime/runtime&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">// your code</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>\u4E0D\u63A8\u8350\u91C7\u7528</strong> <strong><code>false</code>\uFF0C\u8FD9\u6837\u4F1A\u628A\u6240\u6709\u7684 polyfills \u5168\u90E8\u6253\u5165\uFF0C\u9020\u6210\u5305\u4F53\u79EF\u5E9E\u5927</strong></p><p><code>usage</code>:</p><p>\u6211\u4EEC\u5728\u9879\u76EE\u7684\u5165\u53E3\u6587\u4EF6\u5904\u4E0D\u9700\u8981 import \u5BF9\u5E94\u7684 polyfills \u76F8\u5173\u5E93\u3002babel \u4F1A\u6839\u636E\u7528\u6237\u4EE3\u7801\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5E76\u6839\u636E targets \u81EA\u884C\u6CE8\u5165\u76F8\u5173 polyfills\u3002</p><p><code>entry</code>:</p><p>\u6211\u4EEC\u5728\u9879\u76EE\u7684\u5165\u53E3\u6587\u4EF6\u5904 import \u5BF9\u5E94\u7684 polyfills \u76F8\u5173\u5E93\uFF0C\u4F8B\u5982</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import &#39;core-js/stable&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">import &#39;regenerator-runtime/runtime&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">// your code</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6B64\u65F6 babel \u4F1A\u6839\u636E\u5F53\u524D targets \u63CF\u8FF0\uFF0C\u628A\u9700\u8981\u7684\u6240\u6709\u7684 polyfills \u5168\u90E8\u5F15\u5165\u5230\u4F60\u7684\u5165\u53E3\u6587\u4EF6\uFF08\u6CE8\u610F\u662F\u5168\u90E8\uFF0C\u4E0D\u7BA1\u4F60\u662F\u5426\u6709\u7528\u5230\u9AD8\u7EA7\u7684 API\uFF09</p><p><strong>corejs</strong>:</p><blockquote><p>String or { version: string, proposals: boolean }, defaults to &quot;2.0&quot;.</p><p>corejs:<a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer">https://github.com/zloirock/core-js</a></p></blockquote><p>\u6CE8\u610F corejs \u5E76\u4E0D\u662F\u7279\u6B8A\u6982\u5FF5\uFF0C\u800C\u662F\u6D4F\u89C8\u5668\u7684 polyfill \u90FD\u7531\u5B83\u6765\u7BA1\u4E86\u3002</p><p>\u4E3E\u4E2A\u4F8B\u5B50:</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const one = Symbol(&#39;one&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Babel&gt;</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&quot;use strict&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require(&quot;core-js/modules/es.symbol.js&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require(&quot;core-js/modules/es.symbol.description.js&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require(&quot;core-js/modules/es.object.to-string.js&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var one = Symbol(&#39;one&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u91CC\u6216\u8BB8\u6709\u4EBA\u53EF\u80FD\u4E0D\u592A\u6E05\u695A\uFF0C2 \u548C 3 \u6709\u5565\u533A\u522B\uFF0C\u53EF\u4EE5\u770B\u770B\u5B98\u65B9\u7684\u6587\u6863 core-js@3, babel and a look into the future(<a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md" target="_blank" rel="noopener noreferrer">https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md</a>)</p><p>\u7B80\u5355\u8BB2 corejs-2 \u4E0D\u4F1A\u7EF4\u62A4\u4E86\uFF0C\u6240\u6709\u6D4F\u89C8\u5668\u65B0 feature \u7684 polyfill \u90FD\u4F1A\u7EF4\u62A4\u5728 corejs-3 \u4E0A\u3002</p><p><strong>\u603B\u7ED3\u4E0B\uFF1A\u7528 corejs-3\uFF0C\u5F00\u542F</strong> <strong><code>proposals: true</code>\uFF0Cproposals \u4E3A\u771F\u90A3\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528 proposals \u9636\u6BB5\u7684 API \u4E86\u3002</strong></p><h4 id="\u5C0F\u7ED3" tabindex="-1">\u5C0F\u7ED3 <a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a></h4><p>\u4F7F\u7528 preset-env \u6CE8\u5165\u7684 polyfill \u662F\u4F1A\u6C61\u67D3\u5168\u5C40\u7684\uFF0C\u4F46\u662F\u5982\u679C\u662F\u81EA\u5DF1\u7684\u5E94\u7528\u5176\u5B9E\u662F\u5728\u53EF\u63A7\u7684\u3002</p><p>\u6240\u4EE5\u8FD9\u91CC\u63A8\u8350\u4E1A\u52A1\u9879\u76EE\u8FD9\u4E48\u4F7F\u7528 <code>.babelrc</code></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;presets&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;@babel/preset-env&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      {</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;targets&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;chrome&quot;: &quot;58&quot; // \u6309\u81EA\u5DF1\u9700\u8981\u586B\u5199</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;useBuiltIns&quot;: &quot;entry&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;corejs&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;version&quot;: 3,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;proposals&quot;: true</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;plugins&quot;: []</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import &#39;core-js/stable&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">import &#39;regenerator-runtime/runtime&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">// \u5165\u53E3\u6587\u4EF6\u4EE3\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u6837\u914D\u7F6E\u7684\u539F\u56E0\u662F\uFF1A<code>targets</code> \u4E0B\u8BBE\u7F6E\u6211\u4EEC\u4E1A\u52A1\u9879\u76EE\u6240\u9700\u8981\u652F\u6301\u7684\u6700\u4F4E\u73AF\u5883\u914D\u7F6E\uFF0C<code>useBuiltIns</code> \u8BBE\u7F6E\u4E3A <code>entry</code> \uFF0C\u5C06\u6700\u4F4E\u73AF\u5883\u4E0D\u652F\u6301\u7684\u6240\u6709 polyfill \u90FD\u5F15\u5165\u5230\u5165\u53E3\u6587\u4EF6\uFF08\u5373\u4F7F\u4F60\u5728\u4F60\u7684\u4E1A\u52A1\u4EE3\u7801\u4E2D\u5E76\u672A\u4F7F\u7528\uFF09\u3002\u8FD9\u662F\u4E00\u79CD\u517C\u987E\u6700\u7EC8\u6253\u5305\u4F53\u79EF\u548C\u7A33\u59A5\u7684\u65B9\u5F0F\uFF0C\u4E3A\u4EC0\u4E48\u8BF4\u7A33\u59A5\u5462\uFF0C\u56E0\u4E3A\u6211\u4EEC\u5F88\u96BE\u4FDD\u8BC1\u5F15\u7528\u7684\u4E09\u65B9\u5305\u6709\u5904\u7406\u597D polyfill \u8FD9\u4E9B\u95EE\u9898\u3002\u5F53\u7136\u5982\u679C\u4F60\u80FD\u5145\u5206\u4FDD\u8BC1\u4F60\u7684\u4E09\u65B9\u4F9D\u8D56 polyfill \u5904\u7406\u5F97\u5F53\uFF0C\u90A3\u4E48\u4E5F\u53EF\u4EE5\u628A <code>useBuiltIns</code> \u8BBE\u7F6E\u4E3A <code>usage</code>\u3002</p><p>\u9488\u5BF9\u5927\u4F17\u666E\u901A\u9879\u76EE\uFF0C\u53EF\u80FD\u5982\u4E0A\u65B9\u5F0F\u7684\u914D\u7F6E\uFF08\u6487\u5F00\u4E2A\u6027\u5316\uFF09\u5E94\u8BE5\u591F\u7528\u4E86\uFF0C<br> \u4F46\u8FFD\u6C42\u6781\u81F4\u7684\u540C\u5B66\u4F1A\u6709\u4E24\u4E2A\u95EE\u9898\uFF1A</p><p><strong>\u95EE\u9898\u4E00\uFF1A\u8FD8\u662F\u4F1A\u6709\u4E00\u5B9A\u7A0B\u5EA6\u7684\u4EE3\u7801\u91CD\u590D\uFF0C\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</strong></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import a from &#39;a&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export default a;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Babel&gt;</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&quot;use strict&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Object.defineProperty(exports, &quot;__esModule&quot;, {</span></span>
<span class="line"><span style="color:#A6ACCD;">  value: true</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">exports.default = void 0;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var _a = _interopRequireDefault(require(&quot;a&quot;));</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { default: obj }; }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var _default = _a.default;</span></span>
<span class="line"><span style="color:#A6ACCD;">exports.default = _default;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><code>_interopRequireDefault</code> \u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u660E\u663E\u662F\u53EF\u4EE5\u53D8\u6210\u4E00\u4E2A\u72EC\u7ACB\u6A21\u5757\uFF0C\u8FD9\u6837\u6253\u5305\u4F53\u79EF\u4F1A\u53D8\u66F4\u5C0F\uFF08\u518D\u5C11\u4E5F\u662F\u7231\uFF09\u3002</p><p><strong>\u95EE\u9898\u4E8C\uFF1A\u9488\u5BF9\u9879\u76EE\uFF0Cpolyfill \u4F1A\u6C61\u67D3\u5168\u5C40\u53EF\u4EE5\u63A5\u53D7\uFF0C\u4F46\u662F\u4F5C\u4E3A Library \u6211\u66F4\u5E0C\u671B\u5B83\u4E0D\u4F1A\u6C61\u67D3\u5168\u5C40\u73AF\u5883</strong></p><p>\u4E24\u4E2A\u90FD\u662F\u597D\u95EE\u9898\uFF0C\u90A3\u4E48\u63A5\u4E0B\u6765\u5C31\u662F <code>@babel/plugin-transform-runtime</code> \u7684\u51FA\u573A\u673A\u4F1A\u4E86\u3002</p><h3 id="babel-plugin-transform-runtime" tabindex="-1"><code>@babel/plugin-transform-runtime</code> <a class="header-anchor" href="#babel-plugin-transform-runtime" aria-hidden="true">#</a></h3><p>@babel/plugin-transform-runtime(<a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime#corejs" target="_blank" rel="noopener noreferrer">https://babeljs.io/docs/en/babel-plugin-transform-runtime#corejs</a>)</p><p>\u5B98\u65B9\u63CF\u8FF0\u662F\u8FD9\u6837\u7684</p><blockquote><p>A plugin that enables the re-use of Babel&#39;s injected helper code to save on codesize.</p></blockquote><p>\u5F88\u660E\u663E\u8BE5\u63D2\u4EF6\u7684\u51FA\u73B0\u5C31\u662F\u590D\u7528 babel \u6CE8\u5165\u7684\u5173\u8054\u4EE3\u7801\u3002</p><p>\u5177\u4F53 <code>@babel/plugin-transform-runtime</code> \u505A\u4E86\u4EC0\u4E48\uFF0C\u5B98\u65B9\u4E5F\u6709\u660E\u786E\u7684\u89E3\u91CA\uFF0C\u76F8\u4FE1\u5927\u5BB6\u90FD\u80FD\u770B\u660E\u767D\uFF1A</p><blockquote><p>The transform-runtime transformer plugin does three things:</p></blockquote><blockquote><p>Automatically requires @babel/runtime/regenerator when you use generators/async functions (toggleable with the regenerator option).<br> Can use core-js for helpers if necessary instead of assuming it will be polyfilled by the user (toggleable with the corejs option)<br> Automatically removes the inline Babel helpers and uses the module @babel/runtime/helpers instead (toggleable with the helpers option).</p></blockquote><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import a from &#39;a&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export default a;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&quot;use strict&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var _interopRequireDefault = require(&quot;@babel/runtime/helpers/interopRequireDefault&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Object.defineProperty(exports, &quot;__esModule&quot;, {</span></span>
<span class="line"><span style="color:#A6ACCD;">  value: true</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">exports.default = void 0;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var _a = _interopRequireDefault(require(&quot;a&quot;));</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">var _default = _a.default;</span></span>
<span class="line"><span style="color:#A6ACCD;">exports.default = _default;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u662F\u4E0D\u662F\u89E3\u51B3\u4E86\u4E0A\u9762\u63D0\u5230\u7684\u95EE\u9898\u4E00\u3002</p><p>\u81F3\u4E8E\u95EE\u9898\u4E8C\uFF0C\u5173\u4E8E polyfill \u5168\u5C40\u6C61\u67D3\uFF0C\u4E0D\u6253\u7B97\u5C55\u5F00\uFF0C\u56E0\u4E3A\u6D89\u53CA\u6E90\u7801\u8BB2\u89E3\uFF0C\u5927\u5BB6\u53EA\u9700\u8981\u77E5\u9053\xA0<strong>\u901A\u8FC7</strong> <strong><code>@babel/plugin-transform-runtime</code>\xA0\u63D2\u4EF6\u5B9E\u73B0\u7684 polyfill \u662F\u4E0D\u4F1A\u5F71\u54CD\u5168\u5C40\u7684\uFF0C\u6240\u4EE5\u66F4\u9002\u5408 Library \u4F5C\u8005\u4F7F\u7528\uFF0C\u4F46\u662F\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4E00\u65E6\u91C7\u7528\xA0<code>@babel/plugin-transform-runtime</code>,\xA0<code>@babel/preset-env</code>\xA0\u4E2D\u7684\xA0<code>targets</code>\xA0\u5C06\u4F1A\u5931\u6548\uFF0C\u8A00\u4E0B\u4E4B\u610F\uFF0C\u4F60\u7684\u5305\u4F1A\u53D8\u5927\u3002</strong></p><p>\u53E6\u5916\u4E5F\u80AF\u5B9A\u4F1A\u6709\u597D\u5947\u5B9D\u5B9D <code>@babel/plugin-transform-runtime</code> \u5F00\u542F <code>corejs</code> \u5E76\u4E14 <code>@babel/preset-env</code> \u4E5F\u5F00\u542F <code>useBuiltIns</code> \u4F1A\u548B\u6837\uFF0C\u7ED3\u8BBA\u662F\uFF1Apolyfill \u5C06\u4F1A\u91C7\u7528\u4E0D\u6C61\u67D3\u5168\u5C40\u7684\uFF0C\u4E14 <code>targets</code> \u8BBE\u7F6E\u5C06\u4F1A\u5931\u6548\u3002</p><h4 id="\u91CD\u8981\u7684\u95EE\u9898\u8BB2\u4E09\u904D" tabindex="-1">\u91CD\u8981\u7684\u95EE\u9898\u8BB2\u4E09\u904D <a class="header-anchor" href="#\u91CD\u8981\u7684\u95EE\u9898\u8BB2\u4E09\u904D" aria-hidden="true">#</a></h4><table><thead><tr><th>corejs option</th><th>Install command</th></tr></thead><tbody><tr><td>false</td><td>npm install --save @babel/runtime</td></tr><tr><td>2</td><td>npm install --save @babel/runtime-corejs2</td></tr><tr><td>3</td><td>npm install --save @babel/runtime-corejs3</td></tr></tbody></table><p><strong>\u6839\u636E\u5982\u4E0A option\uFF0C@babel/runtime \u8981\u505A\u4E3A\u9879\u76EE\u7684 dependencies</strong><br><strong>\u6839\u636E\u5982\u4E0A option\uFF0C@babel/runtime \u8981\u505A\u4E3A\u9879\u76EE\u7684 dependencies</strong><br><strong>\u6839\u636E\u5982\u4E0A option\uFF0C@babel/runtime \u8981\u505A\u4E3A\u9879\u76EE\u7684 dependencies</strong></p><h4 id="\u5C0F\u7ED3-1" tabindex="-1">\u5C0F\u7ED3 <a class="header-anchor" href="#\u5C0F\u7ED3-1" aria-hidden="true">#</a></h4><ul><li><strong>\u5982\u679C\u662F\u4E1A\u52A1\u9879\u76EE\u5F00\u53D1\u8005</strong>\uFF1A<code>@babel/plugin-transform-runtime</code> \uFF0C\u5EFA\u8BAE\u5173\u95ED <code>corejs</code>\uFF0Cpolyfill \u7684\u5F15\u5165\u7531 <code>@babel/preset-env</code> \u5B8C\u6210\uFF0C\u5373\u5F00\u542F <code>useBuiltIns</code>\uFF08\u5982\u9700\u5176\u4ED6\u914D\u7F6E\uFF0C\u81EA\u884C\u6839\u636E\u8BC9\u6C42\u914D\u7F6E\uFF09\u3002</li></ul><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;presets&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;@babel/preset-env&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      {</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;useBuiltIns&quot;: &quot;entry&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;corejs&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;version&quot;: 3,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;proposals&quot;: true</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;plugins&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;@babel/plugin-transform-runtime&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      {</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;corejs&quot;: false</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5E76\u5728\u5165\u53E3\u6587\u4EF6\u5904 import \u5982\u4E0B\u5185\u5BB9</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import &#39;core-js/stable&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">import &#39;regenerator-runtime/runtime&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">// \u5165\u53E3\u6587\u4EF6\u4EE3\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li><strong>\u5982\u679C\u662F Library \u5F00\u53D1\u8005</strong>\uFF1A<code>@babel/plugin-transform-runtime</code> \uFF0C\u5EFA\u8BAE\u5F00\u542F <code>corejs</code>\uFF0Cpolyfill \u7531 <code>@babel/plugin-transform-runtime</code> \u5F15\u5165\u3002<code>@babel/preset-env</code> \u5173\u95ED <code>useBuiltIns</code>\u3002</li></ul><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;presets&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;@babel/preset-env&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;plugins&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;@babel/plugin-transform-runtime&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      {</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;corejs&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;version&quot;: 3,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;proposals&quot;: true</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4F46\u5FC3\u7EC6\u7684\u540C\u5B66\uFF0C\u80AF\u5B9A\u53C8\u53D1\u73B0\u4E86\u65B0\u7684\u95EE\u9898</p><h4 id="\u65B0\u7684\u95EE\u9898" tabindex="-1">\u65B0\u7684\u95EE\u9898 <a class="header-anchor" href="#\u65B0\u7684\u95EE\u9898" aria-hidden="true">#</a></h4><p><strong>\u4E3A\u4EC0\u4E48</strong> <strong><code>@babel/preset-env</code>\xA0\u4E0D\u80FD\u4F7F\u7528\u4E0D\u6C61\u67D3\u5168\u5C40\u7684 polyfill\uFF1B\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u4E0D\u6C61\u67D3\u5168\u5C40\u7684 polyfill \u5C31\u5FC5\u987B\u8981\u4F7F\u7528<code>@babel/plugin-transform-runtime</code>\uFF0C\u800C\u4E0E\u6B64\u540C\u65F6\u6211\u5FC5\u987B\u59A5\u534F\u6389\xA0<code>targets</code>\xA0\u5E26\u6765\u7684\u4F53\u79EF\u4F18\u52BF\u3002</strong></p><p>\u5982\u4F55\u89E3\u51B3\u5462\uFF1F</p><p>\u62B1\u6B49\u5728\u73B0\u6709\u7684 babel \u6B63\u5F0F\u4F53\u7CFB\u4E0B\u8FD8\u6CA1\u597D\u529E\u6CD5\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u5F53\u7136 babel \u4E5F\u610F\u8BC6\u5230\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E8E\u662F\u6709\u4E86 <code>babel-polyfills</code>\u3002</p><p>\u6CE8\u610F\u662F <code>babel-polyfills</code> \u4E0D\u662F <code>@babel/polyfills</code>\uFF0C\u6211\u4EEC\u79FB\u5230\u6587\u7AE0\u6700\u540E\u3002</p><h3 id="babel-runtime" tabindex="-1"><code>@babel/runtime</code> <a class="header-anchor" href="#babel-runtime" aria-hidden="true">#</a></h3><p>\u4E0D\u9700\u8981\u6DF1\u5165\u7814\u7A76\u5B83\uFF0C\u8BF7\u7ED3\u5408 <code>@babel/plugin-transform-runtime</code> \u6765\u770B\u3002</p><h3 id="core-js" tabindex="-1"><code>core-js</code> <a class="header-anchor" href="#core-js" aria-hidden="true">#</a></h3><p>corejs(<a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer">https://github.com/zloirock/core-js</a>)</p><p>\u4E0D\u9700\u8981\u6DF1\u5165\u7814\u7A76\u5B83\uFF0C\u8BF7\u7ED3\u5408 <code>@babel/preset-env</code> \u6765\u770B\u3002</p><h3 id="babel-polyfills" tabindex="-1"><code>@babel/polyfills</code> <a class="header-anchor" href="#babel-polyfills" aria-hidden="true">#</a></h3><p>\u5DF2\u7ECF\u5728 <code>babel@7.4 \u5E9F\u5F03</code>\uFF0C\u8BF7\u7ED3\u5408 <code>@babel/preset-env</code> \u6765\u770B\u3002</p><h3 id="babel-polyfills-1" tabindex="-1"><code>babel-polyfills</code> <a class="header-anchor" href="#babel-polyfills-1" aria-hidden="true">#</a></h3><p>babel-polyfills(<a href="https://github.com/babel/babel-polyfills" target="_blank" rel="noopener noreferrer">https://github.com/babel/babel-polyfills</a>)</p><p>\u8FD9\u4E2A\u5E93\u7684\u52A8\u673A\u5C31\u662F\u6211\u4EEC\u5728 <code>@babel/plugin-transform-runtime</code> \u5C0F\u8282\u4E0B\u6700\u540E\u63D0\u51FA\u7684\u95EE\u9898\uFF1A</p><blockquote><p>Motivation</p></blockquote><ul><li><p>It wasn&#39;t possible to use @babel/preset-env&#39;s targets option with &quot;pure&quot; ponyfills, because @babel/plugin-transform-runtime is a completely separate package.</p></li><li><p>We forced our users to use core-js if they wanted a Babel integration. core-js is a good and comprehensive polyfill, but it doesn&#39;t fit the needs of all of our users.</p></li></ul><p>\u4F46\u662F\u76EE\u524D\u8FD9\u4E2A\u5E93\u5904\u4E8E <code>experimental</code> \u5373\u8BD5\u9A8C\u6027\u7684\u9636\u6BB5\uFF0C\u6309\u6211\u5BF9 babel \u7684\u4E86\u89E3\uFF0C\u5E76\u4E0D\u63A8\u8350\u5927\u5BB6\u5F53\u524D\u5728\u751F\u4EA7\u4E2D\u5F15\u5165\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5F00\u653E\u7684\u5FC3\u6001\u4FDD\u6301\u5173\u6CE8\u5373\u53EF\u3002</p><p>\u81F3\u4E8E\u60F3\u8981\u5C1D\u9C9C\u7684\uFF0C\u5B98\u65B9\u4E5F\u7ED9\u4E86 \u5347\u7EA7\u65B9\u5F0F(<a href="https://github.com/babel/babel-polyfills/blob/main/docs/migration.md" target="_blank" rel="noopener noreferrer">https://github.com/babel/babel-polyfills/blob/main/docs/migration.md</a>)\u3002</p><p>ps: \u81EA\u5DF1\u5C1D\u9C9C\u81EA\u5DF1\u8D1F\u8D23\uFF08\u6211\u662F\u6C42\u751F\u6B32\u6781\u5F3A\u7684\u4F5C\u8005 o.o\uFF09</p><p><strong>\u603B\u7ED3</strong></p><p>\u8FD9\u7BC7\u6587\u7AE0\u6CA1\u6709 TLDR; \u4E0D\u7BA1\u4F60\u662F\u5DE5\u5177\u5F00\u53D1\u8005\u3001Library \u5F00\u53D1\u8005\u8FD8\u662F\u4E1A\u52A1\u5F00\u53D1\u8005\uFF0C\u591A\u4E00\u70B9\u8010\u5FC3\uFF0C\u597D\u597D\u628A\u8FD9\u7BC7\u6587\u7AE0\u63D0\u53CA\u7684\u5185\u5BB9\u68B3\u7406\u4E00\u4E0B\uFF0C\u56E0\u4E3A\u5C31\u4F5C\u8005\u89C2\u5BDF 99% \u7684\u5F00\u53D1\u8005\u90FD\u8FD8\u6CA1\u6709\u5F04\u660E\u767D\u3002</p>`,112),p=[o];function t(r,c,i,b,u,d){return a(),e("div",null,p)}var y=s(l,[["render",t]]);export{C as __pageData,y as default};
