import{_ as s,c as a,o as n,a as p}from"./app.c19d5535.js";var e="/assets/v2-e510730cbb214ebae66eed01b61396c0_720w.da85b585.jpg",l="/assets/v2-41788753ec9f58a1f079dce0b336fe08_720w.94f3d8ec.png",t="/assets/v2-f8f7a39fb7eabb1674cd755a26caa07b_720w.252c918f.jpg";const h=JSON.parse('{"title":"AST\u8BE6\u89E3\u4E0E\u8FD0\u7528","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4E00\u3001\u4EC0\u4E48\u662FAST\u62BD\u8C61\u8BED\u6CD5\u6811","slug":"\u4E00\u3001\u4EC0\u4E48\u662Fast\u62BD\u8C61\u8BED\u6CD5\u6811"},{"level":2,"title":"\u4E8C\u3001AST\u7684\u7528\u9014","slug":"\u4E8C\u3001ast\u7684\u7528\u9014"},{"level":2,"title":"\u4E09\u3001AST\u7684\u7ED3\u6784","slug":"\u4E09\u3001ast\u7684\u7ED3\u6784"},{"level":2,"title":"\u56DB\u3001AST\u7F16\u8BD1\u8FC7\u7A0B","slug":"\u56DB\u3001ast\u7F16\u8BD1\u8FC7\u7A0B"},{"level":2,"title":"1.\u8BCD\u6CD5\u5206\u6790scanner","slug":"_1-\u8BCD\u6CD5\u5206\u6790scanner"},{"level":2,"title":"2.parser\u751F\u6210AST\u6811","slug":"_2-parser\u751F\u6210ast\u6811"},{"level":2,"title":"3.traverse\u5BF9AST\u6811\u904D\u5386,\u8FDB\u884C\u589E\u5220\u6539\u67E5","slug":"_3-traverse\u5BF9ast\u6811\u904D\u5386-\u8FDB\u884C\u589E\u5220\u6539\u67E5"},{"level":2,"title":"4.generator\u5C06\u66F4\u65B0\u540E\u7684AST\u8F6C\u5316\u6210\u4EE3\u7801","slug":"_4-generator\u5C06\u66F4\u65B0\u540E\u7684ast\u8F6C\u5316\u6210\u4EE3\u7801"},{"level":2,"title":"\u4E94\u3001babel\u539F\u7406\u6D45\u6790","slug":"\u4E94\u3001babel\u539F\u7406\u6D45\u6790"},{"level":2,"title":"\u516D\u3001vue\u4E2DAST\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u8FD0\u7528;","slug":"\u516D\u3001vue\u4E2Dast\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u8FD0\u7528"},{"level":2,"title":"\u7ED3\u8BED\uFF1A","slug":"\u7ED3\u8BED\uFF1A"},{"level":2,"title":"\u53C2\u8003\u6587\u732E","slug":"\u53C2\u8003\u6587\u732E"}],"relativePath":"files/\u4EE3\u7801\u5206\u6790/AST\u8BE6\u89E3\u4E0E\u8FD0\u7528.md"}'),o={name:"files/\u4EE3\u7801\u5206\u6790/AST\u8BE6\u89E3\u4E0E\u8FD0\u7528.md"},r=p('<h1 id="ast\u8BE6\u89E3\u4E0E\u8FD0\u7528" tabindex="-1">AST\u8BE6\u89E3\u4E0E\u8FD0\u7528 <a class="header-anchor" href="#ast\u8BE6\u89E3\u4E0E\u8FD0\u7528" aria-hidden="true">#</a></h1><p>\u4E86\u89E3AST\u4E4B\u524D,\u6211\u4EEC\u5148\u6765\u7B80\u5355\u9648\u8FF0\u4E00\u4E0BJavaScript\u5F15\u64CE\u7684\u5DE5\u4F5C\u539F\u7406:</p><p><img src="'+e+`" alt="img"></p><p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u770B\u5230,JavaScript\u5F15\u64CE\u505A\u7684\u7B2C\u4E00\u4EF6\u4E8B\u60C5\u5C31\u662F\u628AJavaScript\u4EE3\u7801\u7F16\u8BD1\u6210\u62BD\u8C61\u8BED\u6CD5\u6811,\u4E8E\u662F\u5C31\u6709\u4E86\u672C\u6587\u5BF9AST\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u6D45\u6790.</p><h2 id="\u4E00\u3001\u4EC0\u4E48\u662Fast\u62BD\u8C61\u8BED\u6CD5\u6811" tabindex="-1"><strong>\u4E00\u3001\u4EC0\u4E48\u662FAST\u62BD\u8C61\u8BED\u6CD5\u6811</strong> <a class="header-anchor" href="#\u4E00\u3001\u4EC0\u4E48\u662Fast\u62BD\u8C61\u8BED\u6CD5\u6811" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u90FD\u77E5\u9053,\u5728\u4F20\u7EDF\u7684\u7F16\u8BD1\u8BED\u8A00\u7684\u6D41\u7A0B\u4E2D,\u7A0B\u5E8F\u7684\u4E00\u6BB5\u6E90\u4EE3\u7801\u5728\u6267\u884C\u4E4B\u524D\u4F1A\u7ECF\u5386\u4E09\u4E2A\u6B65\u9AA4,\u7EDF\u79F0\u4E3A&quot;\u7F16\u8BD1&quot;:</p><ul><li>\u5206\u8BCD/\u8BCD\u6CD5\u5206\u6790 \u8FD9\u4E2A\u8FC7\u7A0B\u4F1A\u5C06\u7531\u5B57\u7B26\u7EC4\u6210\u7684\u5B57\u7B26\u4E32\u5206\u89E3\u6210\u6709\u610F\u4E49\u7684\u4EE3\u7801\u5757,\u8FD9\u4E9B\u4EE3\u7801\u5757\u7EDF\u79F0\u4E3A<strong>\u8BCD\u6CD5\u5355\u5143</strong>(token). \u4E3E\u4E2A\u4F8B\u5B50: let a = 1, \u8FD9\u6BB5\u7A0B\u5E8F\u901A\u5E38\u4F1A\u88AB\u5206\u89E3\u6210\u4E3A\u4E0B\u9762\u8FD9\u4E9B\u8BCD\u6CD5\u5355\u5143: let \u3001a\u3001=\u30011\u3001 \uFF1B\u7A7A\u683C\u662F\u5426\u88AB\u5F53\u6210\u6B64\u6CD5\u5355\u5143\uFF0C\u53D6\u51B3\u4E8E\u7A7A\u683C\u5728\u8FD9\u95E8\u8BED\u8A00\u4E2D\u7684\u610F\u4E49\u3002</li><li>\u89E3\u6790/\u8BED\u6CD5\u5206\u6790 \u8FD9\u4E2A\u8FC7\u7A0B\u662F\u5C06\u8BCD\u6CD5\u5355\u5143\u6D41\u8F6C\u6362\u6210\u4E00\u4E2A\u7531\u5143\u7D20\u5D4C\u5957\u6240\u7EC4\u6210\u7684\u4EE3\u8868\u4E86\u7A0B\u5E8F\u8BED\u6CD5\u7ED3\u6784\u7684\u6811,\u8FD9\u4E2A\u6811\u88AB\u79F0\u4E3A&quot;<strong>\u62BD\u8C61\u8BED\u6CD5\u6811</strong>&quot;\uFF08abstract syntax code\uFF0CAST\uFF09</li><li>\u4EE3\u7801\u751F\u6210 \u5C06AST\u8F6C\u6362\u6210\u53EF\u6267\u884C\u4EE3\u7801\u7684\u8FC7\u7A0B\u88AB\u79F0\u4E3A\u4EE3\u7801\u751F\u6210.</li></ul><p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811</strong>\uFF08abstract syntax code\uFF0CAST\uFF09\u662F\u6E90\u4EE3\u7801\u7684\u62BD\u8C61\u8BED\u6CD5\u7ED3\u6784\u7684\u6811\u72B6\u8868\u793A\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\uFF0C\u4E4B\u6240\u4EE5\u8BF4\u662F\u62BD\u8C61\u7684\uFF0C\u62BD\u8C61\u8868\u793A\u628Ajs\u4EE3\u7801\u8FDB\u884C\u4E86\u7ED3\u6784\u5316\u7684\u8F6C\u5316\uFF0C\u8F6C\u5316\u4E3A\u4E00\u79CD\u6570\u636E\u7ED3\u6784\u3002\u8FD9\u79CD\u6570\u636E\u7ED3\u6784\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u5927\u7684json\u5BF9\u8C61\uFF0Cjson\u6211\u4EEC\u90FD\u719F\u6089\uFF0C\u4ED6\u5C31\u50CF\u4E00\u9897\u679D\u7E41\u53F6\u8302\u7684\u6811\u3002\u6709\u6811\u6839\uFF0C\u6709\u6811\u5E72\uFF0C\u6709\u6811\u679D\uFF0C\u6709\u6811\u53F6\uFF0C\u65E0\u8BBA\u591A\u5C0F\u591A\u5927\uFF0C\u90FD\u662F\u4E00\u68F5\u5B8C\u6574\u7684\u6811\u3002</p><p>\u7B80\u5355\u7406\u89E3,\u5C31\u662F\u628A\u6211\u4EEC\u5199\u7684\u4EE3\u7801\u6309\u7167\u4E00\u5B9A\u7684\u89C4\u5219\u8F6C\u6362\u6210\u4E00\u79CD\u6811\u5F62\u7ED3\u6784\u3002</p><h2 id="\u4E8C\u3001ast\u7684\u7528\u9014" tabindex="-1"><strong>\u4E8C\u3001AST\u7684\u7528\u9014</strong> <a class="header-anchor" href="#\u4E8C\u3001ast\u7684\u7528\u9014" aria-hidden="true">#</a></h2><p>AST\u7684\u4F5C\u7528\u4E0D\u4EC5\u4EC5\u662F\u7528\u6765\u5728JavaScript\u5F15\u64CE\u7684\u7F16\u8BD1\u4E0A\uFF0C\u6211\u4EEC\u5728\u5B9E\u9645\u7684\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u4E5F\u662F\u7ECF\u5E38\u4F7F\u7528\u7684\uFF0C\u6BD4\u5982\u6211\u4EEC\u5E38\u7528\u7684babel\u63D2\u4EF6\u5C06 ES6\u8F6C\u5316\u6210ES5\u3001\u4F7F\u7528 UglifyJS\u6765\u538B\u7F29\u4EE3\u7801 \u3001css\u9884\u5904\u7406\u5668\u3001\u5F00\u53D1WebPack\u63D2\u4EF6\u3001Vue-cli\u524D\u7AEF\u81EA\u52A8\u5316\u5DE5\u5177\u7B49\u7B49\uFF0C\u8FD9\u4E9B\u5E95\u5C42\u539F\u7406\u90FD\u662F\u57FA\u4E8EAST\u6765\u5B9E\u73B0\u7684\uFF0CAST\u80FD\u529B\u5341\u5206\u5F3A\u5927\uFF0C \u80FD\u591F\u5E2E\u52A9\u5F00\u53D1\u8005\u7406\u89E3JavaScript\u8FD9\u95E8\u8BED\u8A00\u7684\u7CBE\u9AD3\u3002</p><h2 id="\u4E09\u3001ast\u7684\u7ED3\u6784" tabindex="-1"><strong>\u4E09\u3001AST\u7684\u7ED3\u6784</strong> <a class="header-anchor" href="#\u4E09\u3001ast\u7684\u7ED3\u6784" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u7EC4\u7B80\u5355\u7684AST\u6811\u72B6\u7ED3\u6784:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const team = &#39;\u5927\u8F6C\u8F6CFE&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7ECF\u8FC7\u8F6C\u5316,\u8F93\u51FA\u5982\u4E0BAST\u6811\u72B6\u7ED3\u6784:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;type&quot;: &quot;Program&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;start&quot;: 0,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;end&quot;: 18,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;body&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    {</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;type&quot;: &quot;VariableDeclaration&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;start&quot;: 0,</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;end&quot;: 18,</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;declarations&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;type&quot;: &quot;VariableDeclarator&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;start&quot;: 6,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;end&quot;: 18,</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;id&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;type&quot;: &quot;Identifier&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;start&quot;: 6,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;end&quot;: 8,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;name&quot;: &quot;team&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">          },</span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;init&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;type&quot;: &quot;Literal&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;start&quot;: 11,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;end&quot;: 18,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;value&quot;: &quot;\u5927\u8F6C\u8F6CFE&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;raw&quot;: &quot;&#39;\u5927\u8F6C\u8F6CFE&#39;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">          }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      ],</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;kind&quot;: &quot;const&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;sourceType&quot;: &quot;module&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u4E00\u4E2A\u6807\u51C6\u7684AST\u7ED3\u6784\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2Ajson\u5BF9\u8C61\uFF0C\u90A3\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E9B\u65B9\u6CD5\u53BB\u89E3\u6790\u548C\u64CD\u4F5C\u5B83\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5148\u63D0\u4F9B\u4E00\u4E2A\u5728\u7EBF\u68C0\u6D4B\u5DE5\u5177,\u5927\u5BB6\u53EF\u4EE5\u81EA\u884C\u53BB\u4F53\u9A8C: <a href="https://link.zhihu.com/?target=https%3A//esprima.org/demo/parse.html%23" target="_blank" rel="noopener noreferrer">https://esprima.org/demo/parse.html#</a></p><h2 id="\u56DB\u3001ast\u7F16\u8BD1\u8FC7\u7A0B" tabindex="-1"><strong>\u56DB\u3001AST\u7F16\u8BD1\u8FC7\u7A0B</strong> <a class="header-anchor" href="#\u56DB\u3001ast\u7F16\u8BD1\u8FC7\u7A0B" aria-hidden="true">#</a></h2><p>AST\u7F16\u8BD1\u6D41\u7A0B\u56FE:</p><p><img src="`+l+`" alt="img"></p><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230,AST\u5DE5\u5177\u4F1A\u6E90\u4EE3\u7801\u7ECF\u8FC7\u56DB\u4E2A\u9636\u6BB5\u7684\u8F6C\u6362\uFF1A</p><h2 id="_1-\u8BCD\u6CD5\u5206\u6790scanner" tabindex="-1"><strong>1.\u8BCD\u6CD5\u5206\u6790scanner</strong> <a class="header-anchor" href="#_1-\u8BCD\u6CD5\u5206\u6790scanner" aria-hidden="true">#</a></h2><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">var company = &#39;zhuanzhuan&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5047\u5982\u6709\u4EE5\u4E0A\u4EE3\u7801\uFF0C\u5728\u8BCD\u6CD5\u5206\u6790\u9636\u6BB5\uFF0C\u4F1A\u5148\u5BF9\u6574\u4E2A\u4EE3\u7801\u8FDB\u884C\u626B\u63CF\uFF0C\u751F\u6210tokens\u6D41\uFF0C\u626B\u63CF\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ul><li>\u6211\u4EEC\u4F1A\u901A\u8FC7\u6761\u4EF6\u5224\u65AD\u8BED\u53E5\u5224\u65AD\u8FD9\u4E2A\u5B57\u7B26\u662F \u5B57\u6BCD\uFF0C &quot;/&quot; , &quot;\u6570\u5B57&quot; , \u7A7A\u683C , &quot;(&quot; , &quot;)&quot; , &quot;;&quot; \u7B49\u7B49\u3002</li><li>\u5982\u679C\u662F\u5B57\u6BCD\u4F1A\u7EE7\u7EED\u5F80\u4E0B\u770B\u5982\u679C\u8FD8\u662F\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u4F1A\u7EE7\u7EED\u8FD9\u4E00\u8FC7\u7A0B\u76F4\u5230\u4E0D\u662F\u4E3A\u6B62\uFF0C\u8FD9\u4E2A\u65F6\u5019\u53D1\u73B0\u627E\u5230\u7684\u8FD9\u4E2A\u5B57\u7B26\u4E32\u662F\u4E00\u4E2A &quot;var&quot;\uFF0C \u662F\u4E00\u4E2AKeyword\uFF0C\u5E76\u4E14\u4E0B\u4E00\u4E2A\u5B57\u7B26\u662F\u4E00\u4E2A &quot;\u7A7A\u683C&quot;\uFF0C \u5C31\u4F1A\u751F\u6210{ &quot;type&quot; : &quot;Keyword&quot; , &quot;value&quot; : &quot;var&quot; }\u653E\u5165\u6570\u7EC4\u4E2D\u3002</li><li>\u5B83\u7EE7\u7EED\u5411\u4E0B\u627E\u53D1\u73B0\u4E86\u4E00\u4E2A\u5B57\u6BCD &#39;company&#39;(\u56E0\u4E3A\u627E\u5230\u7684\u4E0A\u4E00\u4E2A\u503C\u662F &quot;var&quot; \u8FD9\u4E2A\u65F6\u5019\u5982\u679C\u5B83\u53D1\u73B0\u4E0B\u4E00\u4E2A\u5B57\u7B26\u4E0D\u662F\u5B57\u6BCD\u53EF\u80FD\u76F4\u63A5\u5C31\u4F1A\u62A5\u9519\u8FD4\u56DE)\u5E76\u4E14\u540E\u9762\u662F\u7A7A\u683C\uFF0C\u751F\u6210{ &quot;type&quot; : &quot;Identifier&quot; , &quot;value&quot; : &quot;company&quot; }\u653E\u5230\u6570\u7EC4\u4E2D\u3002</li><li>\u53D1\u73B0\u4E86\u4E00\u4E2A &quot;=&quot;, \u751F\u6210\u4E86{ &quot;type&quot; : &quot;Punctuator&quot; , &quot;value&quot; : &quot;=&quot; }\u653E\u5230\u4E86\u6570\u7EC4\u4E2D\u3002</li><li>\u53D1\u73B0\u4E86&#39;zhuanzhuan&#39;,\u751F\u6210\u4E86{ &quot;type&quot; : &quot;String&quot; , &quot;value&quot; : &quot;zhuanzhuan&quot; }\u653E\u5230\u4E86\u6570\u7EC4\u4E2D\u3002 \u89E3\u6790\u5982\u4E0B\uFF1A</li></ul><p><img src="`+t+`" alt="img"></p><h2 id="_2-parser\u751F\u6210ast\u6811" tabindex="-1"><strong>2.parser\u751F\u6210AST\u6811</strong> <a class="header-anchor" href="#_2-parser\u751F\u6210ast\u6811" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528<strong>esprima</strong>\u53BB\u751F\u6210, \u5B89\u88C5\u76F8\u5173\u4F9D\u8D56 npm i esprima --save</p><p>\u4EE5\u5982\u4E0B\u4EE3\u7801\u4E3A\u4F8B:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const company = &#39;zhuanzhuan&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8981\u5F97\u5230\u5176\u5BF9\u5E94\u7684AST,\u6211\u4EEC\u5BF9\u5176\u8FDB\u884C\u5982\u4E0B\u64CD\u4F5C:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const esprima = require(&#39;esprima&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">let code = &#39;const company = &quot;zhuanzhuan&quot; &#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">const ast = esprima.parseScript(code);</span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(ast);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ node test.js</span></span>
<span class="line"><span style="color:#A6ACCD;">Script {</span></span>
<span class="line"><span style="color:#A6ACCD;">  type: &#39;Program&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  body: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    VariableDeclaration {</span></span>
<span class="line"><span style="color:#A6ACCD;">      type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      declarations: [Array],</span></span>
<span class="line"><span style="color:#A6ACCD;">      kind: &#39;const&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  sourceType: &#39;script&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u5F97\u5230\u4E86\u4E00\u68F5AST\u6811</p><h2 id="_3-traverse\u5BF9ast\u6811\u904D\u5386-\u8FDB\u884C\u589E\u5220\u6539\u67E5" tabindex="-1"><strong>3.traverse\u5BF9AST\u6811\u904D\u5386,\u8FDB\u884C\u589E\u5220\u6539\u67E5</strong> <a class="header-anchor" href="#_3-traverse\u5BF9ast\u6811\u904D\u5386-\u8FDB\u884C\u589E\u5220\u6539\u67E5" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528<strong>estraverse</strong>\u53BB\u5B8C\u6210, \u5B89\u88C5\u76F8\u5173\u4F9D\u8D56 npm i estraverse --save</p><p>\u8FD8\u662F\u4E0A\u9762\u7684\u4EE3\u7801, \u6211\u4EEC\u66F4\u6539\u4E3A <strong>const team = &#39;\u5927\u8F6C\u8F6CFE&#39;</strong></p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const esprima = require(&#39;esprima&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">const estraverse = require(&#39;estraverse&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">let code = &#39;const company = &quot;zhuanzhuan&quot; &#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">const ast = esprima.parseScript(code);</span></span>
<span class="line"><span style="color:#A6ACCD;">estraverse.traverse(ast, {</span></span>
<span class="line"><span style="color:#A6ACCD;">    enter: function (node) {</span></span>
<span class="line"><span style="color:#A6ACCD;">     node.name = &#39;team&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        node.value = &quot;\u5927\u8F6C\u8F6CFE&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(ast);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ node test.js</span></span>
<span class="line"><span style="color:#A6ACCD;">Script {</span></span>
<span class="line"><span style="color:#A6ACCD;">  type: &#39;Program&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  body: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    VariableDeclaration {</span></span>
<span class="line"><span style="color:#A6ACCD;">      type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      declarations: [Array],</span></span>
<span class="line"><span style="color:#A6ACCD;">      kind: &#39;const&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      name: &#39;team&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      value: &#39;\u5927\u8F6C\u8F6CFE&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  sourceType: &#39;script&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  name: &#39;team&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  value: &#39;\u5927\u8F6C\u8F6CFE&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u6837\u4E00\u6765,\u6211\u4EEC\u5C31\u5B8C\u6210\u4E86\u5BF9AST\u7684\u904D\u5386\u66F4\u65B0\u3002</p><h2 id="_4-generator\u5C06\u66F4\u65B0\u540E\u7684ast\u8F6C\u5316\u6210\u4EE3\u7801" tabindex="-1"><strong>4.generator\u5C06\u66F4\u65B0\u540E\u7684AST\u8F6C\u5316\u6210\u4EE3\u7801</strong> <a class="header-anchor" href="#_4-generator\u5C06\u66F4\u65B0\u540E\u7684ast\u8F6C\u5316\u6210\u4EE3\u7801" aria-hidden="true">#</a></h2><p>\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528<strong>escodegen</strong>\u53BB\u751F\u6210, \u5B89\u88C5\u76F8\u5173\u4F9D\u8D56 npm i escodegen --save</p><p>\u6574\u4F53\u4EE3\u7801\u7ED3\u6784\u5982\u4E0B:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const esprima = require(&#39;esprima&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">const estraverse = require(&#39;estraverse&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">const escodegen = require(&#39;escodegen&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">let code = &#39;const company = &quot;zhuanzhuan&quot; &#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">const ast = esprima.parseScript(code);</span></span>
<span class="line"><span style="color:#A6ACCD;">estraverse.traverse(ast, {</span></span>
<span class="line"><span style="color:#A6ACCD;">    enter: function (node) {</span></span>
<span class="line"><span style="color:#A6ACCD;">     node.name = &#39;team&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">        node.value = &quot;\u5927\u8F6C\u8F6CFE&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">const transformCode = escodegen.generate(ast);</span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(transformCode);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4F1A\u5F97\u5230\u5982\u4E0B\u7ED3\u679C:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ node test.js</span></span>
<span class="line"><span style="color:#A6ACCD;">const team = &#39;\u5927\u8F6C\u8F6CFE&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u6837\u4E00\u6765,\u6211\u4EEC\u5C31\u5B8C\u6210\u4E86\u5BF9\u4E00\u6BB5\u7B80\u5355\u4EE3\u7801\u7684AST\u7F16\u8BD1\u8FC7\u7A0B\u3002</p><h2 id="\u4E94\u3001babel\u539F\u7406\u6D45\u6790" tabindex="-1"><strong>\u4E94\u3001babel\u539F\u7406\u6D45\u6790</strong> <a class="header-anchor" href="#\u4E94\u3001babel\u539F\u7406\u6D45\u6790" aria-hidden="true">#</a></h2><p><strong>Babel\u63D2\u4EF6\u5C31\u662F\u4F5C\u7528\u4E8E\u62BD\u8C61\u8BED\u6CD5\u6811\u3002</strong></p><p>Babel \u7684\u4E09\u4E2A\u4E3B\u8981\u5904\u7406\u6B65\u9AA4\u5206\u522B\u662F\uFF1A \u89E3\u6790\uFF08parse\uFF09\uFF0C\u8F6C\u6362\uFF08transform\uFF09\uFF0C\u751F\u6210\uFF08generate\uFF09\u3002</p><ul><li><strong>\u89E3\u6790</strong> \u5C06\u4EE3\u7801\u89E3\u6790\u6210\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AST\uFF09\uFF0C\u6BCF\u4E2Ajs\u5F15\u64CE\uFF08\u6BD4\u5982Chrome\u6D4F\u89C8\u5668\u4E2D\u7684V8\u5F15\u64CE\uFF09\u90FD\u6709\u81EA\u5DF1\u7684AST\u89E3\u6790\u5668\uFF0C\u800CBabel\u662F\u901A\u8FC7Babylon(<a href="https://link.zhihu.com/?target=https%3A//github.com/babel/babylon" target="_blank" rel="noopener noreferrer">https://github.com/babel/babylon</a>)\u5B9E\u73B0\u7684\u3002\u89E3\u6790\u8FC7\u7A0B\u6709\u4E24\u4E2A\u9636\u6BB5\uFF1A<strong>\u8BCD\u6CD5\u5206\u6790</strong>\u548C<strong>\u8BED\u6CD5\u5206\u6790</strong>\uFF0C\u8BCD\u6CD5\u5206\u6790\u9636\u6BB5\u628A\u5B57\u7B26\u4E32\u5F62\u5F0F\u7684\u4EE3\u7801\u8F6C\u6362\u4E3A<strong>\u4EE4\u724C</strong>\uFF08tokens\uFF09\u6D41\uFF0C\u4EE4\u724C\u7C7B\u4F3C\u4E8EAST\u4E2D\u8282\u70B9\uFF1B\u800C\u8BED\u6CD5\u5206\u6790\u9636\u6BB5\u5219\u4F1A\u628A\u4E00\u4E2A\u4EE4\u724C\u6D41\u8F6C\u6362\u6210 AST\u7684\u5F62\u5F0F\uFF0C\u540C\u65F6\u8FD9\u4E2A\u9636\u6BB5\u4F1A\u628A\u4EE4\u724C\u4E2D\u7684\u4FE1\u606F\u8F6C\u6362\u6210AST\u7684\u8868\u8FF0\u7ED3\u6784\u3002</li><li><strong>\u8F6C\u6362</strong> \u8F6C\u6362\u6B65\u9AA4\u63A5\u6536 AST \u5E76\u5BF9\u5176\u8FDB\u884C\u904D\u5386\uFF0C\u5728\u6B64\u8FC7\u7A0B\u4E2D\u5BF9\u8282\u70B9\u8FDB\u884C\u6DFB\u52A0\u3001\u66F4\u65B0\u53CA\u79FB\u9664\u7B49\u64CD\u4F5C\u3002 Babel\u901A\u8FC7<strong>babel-traverse</strong>\u5BF9\u5176\u8FDB\u884C\u6DF1\u5EA6\u4F18\u5148\u904D\u5386\uFF0C\u7EF4\u62A4AST\u6811\u7684\u6574\u4F53\u72B6\u6001\uFF0C\u5E76\u4E14\u53EF\u5B8C\u6210\u5BF9\u5176\u7684\u66FF\u6362\uFF0C\u5220\u9664\u6216\u8005\u589E\u52A0\u8282\u70B9\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u53C2\u6570\u4E3A\u539F\u59CBAST\u548C\u81EA\u5B9A\u4E49\u7684\u8F6C\u6362\u89C4\u5219\uFF0C\u8FD4\u56DE\u7ED3\u679C\u4E3A\u8F6C\u6362\u540E\u7684AST\u3002</li><li><strong>\u751F\u6210</strong><strong><a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Code_generation_(compiler)" target="_blank" rel="noopener noreferrer">\u4EE3\u7801\u751F\u6210</a><strong>\u6B65\u9AA4\u628A\u6700\u7EC8\uFF08\u7ECF\u8FC7\u4E00\u7CFB\u5217\u8F6C\u6362\u4E4B\u540E\uFF09\u7684 AST \u8F6C\u6362\u6210\u5B57\u7B26\u4E32\u5F62\u5F0F\u7684\u4EE3\u7801\uFF0C\u540C\u65F6\u8FD8\u4F1A\u521B\u5EFA\u6E90\u7801\u6620\u5C04\uFF08source maps\uFF09(<a href="https://link.zhihu.com/?target=http%3A//www.html5rocks.com/en/tutorials/developertools/sourcemaps/" target="_blank" rel="noopener noreferrer">http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/</a>)\u3002. \u4EE3\u7801\u751F\u6210\u5176\u5B9E\u5F88\u7B80\u5355\uFF1A\u6DF1\u5EA6\u4F18\u5148\u904D\u5386\u6574\u4E2A AST\uFF0C\u7136\u540E\u6784\u5EFA\u53EF\u4EE5\u8868\u793A\u8F6C\u6362\u540E\u4EE3\u7801\u7684\u5B57\u7B26\u4E32\u3002 Babel\u901A\u8FC7</strong>babel-generator</strong>\u518D\u8F6C\u6362\u6210js\u4EE3\u7801\uFF0C\u8FC7\u7A0B\u5C31\u662F\u6DF1\u5EA6\u4F18\u5148\u904D\u5386\u6574\u4E2AAST\uFF0C\u7136\u540E\u6784\u5EFA\u53EF\u4EE5\u8868\u793A\u8F6C\u6362\u540E\u4EE3\u7801\u7684\u5B57\u7B26\u4E32\u3002</li></ul><h2 id="\u516D\u3001vue\u4E2Dast\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u8FD0\u7528" tabindex="-1"><strong>\u516D\u3001vue\u4E2DAST\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u8FD0\u7528;</strong> <a class="header-anchor" href="#\u516D\u3001vue\u4E2Dast\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u8FD0\u7528" aria-hidden="true">#</a></h2><p>vue\u4E2DAST\u4E3B\u8981\u8FD0\u7528\u5728<strong>\u6A21\u677F\u7F16\u8BD1</strong>\u8FC7\u7A0B.</p><p>\u6211\u4EEC\u5148\u6765\u770B\u770Bvue\u6A21\u677F\u7F16\u8BD1\u7684\u6574\u4F53\u6D41\u7A0B\u56FE\uFF1A</p><p><img src="https://pic4.zhimg.com/80/v2-a8ecb96e8170ecf76694a6b2e943f6e7_720w.webp" alt="img"></p><p>vue\u4E2D\u7684\u6A21\u677F\u7F16\u8BD1\u4E3B\u8981\u5206\u4E3A\u4E09\u4E2A\u6B65\u9AA4:</p><ol><li>\u89E3\u6790\u5668\u9636\u6BB5: \u5C06 template \u91CC\u9762\u7684\u4EE3\u7801\u89E3\u6790\u6210AST\u62BD\u8C61\u8BED\u6CD5\u6811;</li><li>\u4F18\u5316\u5668\u9636\u6BB5: \u5C06AST\u62BD\u8C61\u8BED\u6CD5\u6811\u9759\u6001\u6807\u7B7E\u6253\u4E0Atag,\u9632\u6B62\u91CD\u590D\u6E32\u67D3(\u4F18\u5316\u4E86diff\u7B97\u6CD5);</li><li>\u4EE3\u7801\u751F\u6210\u5668\u9636\u6BB5: \u4F18\u5316\u540E\u7684AST\u62BD\u8C61\u8BED\u6CD5\u6811\u901A\u8FC7generate\u51FD\u6570\u751F\u6210render\u51FD\u6570\u5B57\u7B26\u4E32\uFF1B</li></ol><p>\u6211\u4EEC\u6765\u770B\u770Bvue\u6E90\u7801\u7684\u6574\u4F53\u5B9E\u73B0\u8FC7\u7A0B:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">export const createCompiler = createCompilerCreator(function baseCompile (</span></span>
<span class="line"><span style="color:#A6ACCD;">  template: string,</span></span>
<span class="line"><span style="color:#A6ACCD;">  options: CompilerOptions</span></span>
<span class="line"><span style="color:#A6ACCD;">): CompiledResult {</span></span>
<span class="line"><span style="color:#A6ACCD;">  //\u751F\u6210ast\u7684\u8FC7\u7A0B                                                 </span></span>
<span class="line"><span style="color:#A6ACCD;">  const ast = parse(template.trim(), options)</span></span>
<span class="line"><span style="color:#A6ACCD;">  //\u4F18\u5316ast\u7684\u8FC7\u7A0B,\u7ED9ast\u62BD\u8C61\u8BED\u6CD5\u6811\u9759\u6001\u6807\u7B7E\u6253\u4E0Atag,\u9632\u6B62\u91CD\u590D\u6E32\u67D3</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (options.optimize !== false) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    optimize(ast, options)</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  //\u901A\u8FC7generate\u51FD\u6570\u751F\u6210render\u51FD\u6570\u5B57\u7B26\u4E32</span></span>
<span class="line"><span style="color:#A6ACCD;">  const code = generate(ast, options)</span></span>
<span class="line"><span style="color:#A6ACCD;">  return {</span></span>
<span class="line"><span style="color:#A6ACCD;">    ast,</span></span>
<span class="line"><span style="color:#A6ACCD;">    render: code.render,</span></span>
<span class="line"><span style="color:#A6ACCD;">    staticRenderFns: code.staticRenderFns</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u89E3\u6790\u5668\u8981\u5B9E\u73B0\u7684\u529F\u80FD\u5C31\u662F\u5C06\u6A21\u677F\u89E3\u6790\u6210<strong>AST</strong>\uFF0C\u6211\u4EEC\u8FD9\u91CC\u4E3B\u8981\u6765\u5206\u6790\u4E00\u4E0B\u4EE3\u7801\u89E3\u6790\u9636\u6BB5\uFF0C\u8FD9\u91CC\u4E3B\u8981\u8FD0\u7528\u7684\u662F<strong>parse()\u8FD9\u4E2A\u51FD\u6570,\u4E8B\u5B9E\u4E0A,\u89E3\u6790\u5668\u5185\u90E8\u4E5F\u5206\u4E3A\u597D\u51E0\u4E2A\u89E3\u6790\u5668,\u6BD4\u5982HTML\u89E3\u6790\u5668</strong>\u3001<strong>\u6587\u672C\u89E3\u6790\u5668</strong>\u4EE5\u53CA<strong>\u8FC7\u6EE4\u89E3\u6790\u5668</strong>\uFF0C\u5176\u4E2D\u6700\u4E3B\u8981\u7684\u5C31\u662FHTML\u89E3\u6790\u5668\u3002HTML\u89E3\u6790\u5668\u7684\u4F5C\u7528\u5C31\u662F\u89E3\u6790HTML\uFF0C\u5B83\u5728\u89E3\u6790HTML\u7684\u8FC7\u7A0B\u4E2D\u4F1A\u4E0D\u65AD\u89E6\u53D1\u5404\u79CD\u94A9\u5B50\u51FD\u6570\uFF0C\u6211\u4EEC\u6765\u770B\u770B\u4EE3\u7801\u5B9E\u73B0\uFF1A</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">parseHTML(template, { </span></span>
<span class="line"><span style="color:#A6ACCD;"> //\u89E3\u6790\u5F00\u59CB\u6807\u7B7E</span></span>
<span class="line"><span style="color:#A6ACCD;"> start (tag, attrs, unary, start, end) {</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    //\u89E3\u6790\u7ED3\u675F\u6807\u7B7E</span></span>
<span class="line"><span style="color:#A6ACCD;">     end (tag, start, end) {</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    //\u89E3\u6790\u6587\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;"> chars (text: string, start: number, end: number) {</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    //\u89E3\u6790\u6CE8\u91CA</span></span>
<span class="line"><span style="color:#A6ACCD;">    comment (text: string, start, end){</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E3E\u4E2A\u4F8B\u5B50:</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;div&gt;\u6211\u4EEC\u662F\u5927\u8F6C\u8F6CFE&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5F53\u4E0A\u9762\u8FD9\u4E2A\u6A21\u677F\u88ABHTML\u89E3\u6790\u5668\u89E3\u6790\u65F6,\u6240\u89E6\u53D1\u7684\u94A9\u5B50\u51FD\u6570\u4F9D\u6B21\u662F: <strong>start</strong>\u3001<strong>chars</strong>\u3001<strong>end</strong>\u3002</p><p>\u6240\u4EE5HTML\u89E3\u6790\u5668\u5728\u5B9E\u73B0\u4E0A\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u5B83\u6709\u4E24\u4E2A\u53C2\u6570----\u6A21\u677F\u548C\u9009\u9879\uFF0C\u6211\u4EEC\u7684\u6A21\u677F\u662F\u4E00\u5C0F\u6BB5\u4E00\u5C0F\u6BB5\u53BB\u622A\u53D6\u4E0E\u89E3\u6790\u7684\uFF0C\u6240\u4EE5\u9700\u8981\u4E0D\u65AD\u5FAA\u73AF\u622A\u53D6\uFF0C\u6211\u4EEC\u6765\u770B\u770Bvue\u5185\u90E8\u5B9E\u73B0\u539F\u7406\uFF1A</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">function parseHTML (html, options) {</span></span>
<span class="line"><span style="color:#A6ACCD;"> while (html) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    //\u5224\u65AD\u7236\u5143\u7D20\u4E3A\u6B63\u5E38\u6807\u7B7E\u7684\u5143\u7D20\u7684\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">   if (!lastTag || !isPlainTextElement(lastTag)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">     //vue\u4E2D\u8981\u5224\u65AD\u662F \u6587\u672C\u3001\u6CE8\u91CA\u3001\u6761\u4EF6\u6CE8\u91CA\u3001DOCTYPE\u3001\u7ED3\u675F\u3001\u5F00\u59CB\u6807\u7B7E</span></span>
<span class="line"><span style="color:#A6ACCD;">     //\u9664\u4E86\u6587\u672C\u6807\u7B7E\uFF0C \u5176\u4ED6\u7684\u90FD\u662F\u4EE5 &lt; \u5F00\u5934, \u6240\u4EE5\u533A\u5206\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">     var textEnd = html.indexOf(&#39;&lt;&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        if (textEnd === 0) {</span></span>
<span class="line"><span style="color:#A6ACCD;">         //\u6CE8\u91CA\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">         if (comment.test(html)) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">         //\u6761\u4EF6\u6CE8\u91CA\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">         if (conditionalComment.test(html)) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">         //doctype\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">         var doctypeMatch = html.match(doctype);</span></span>
<span class="line"><span style="color:#A6ACCD;">                if (doctypeMatch) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">                //\u7ED3\u675F\u6807\u7B7E\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">                var endTagMatch = html.match(endTag);</span></span>
<span class="line"><span style="color:#A6ACCD;">                if (endTagMatch) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">                //\u5F00\u59CB\u6807\u7B7E\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">                var startTagMatch = parseStartTag();</span></span>
<span class="line"><span style="color:#A6ACCD;">                if (startTagMatch) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">             var text = (void 0), rest = (void 0), next = (void 0);</span></span>
<span class="line"><span style="color:#A6ACCD;">             //\u89E3\u6790\u6587\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">             if (textEnd &gt;= 0) {}</span></span>
<span class="line"><span style="color:#A6ACCD;">             // &quot;&lt;&quot; \u5B57\u7B26\u5728\u5F53\u524D html \u5B57\u7B26\u4E32\u4E2D\u4E0D\u5B58\u5728</span></span>
<span class="line"><span style="color:#A6ACCD;">             if (textEnd &lt; 0) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                text = html</span></span>
<span class="line"><span style="color:#A6ACCD;">                html = &#39;&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">              }</span></span>
<span class="line"><span style="color:#A6ACCD;">              // \u5982\u679C\u5B58\u5728 text \u6587\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">              // \u8C03\u7528 options.chars \u56DE\u8C03\uFF0C\u4F20\u5165 text \u6587\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">             if (options.chars &amp;&amp; text) {</span></span>
<span class="line"><span style="color:#A6ACCD;">               // \u5B57\u7B26\u76F8\u5173\u56DE\u8C03</span></span>
<span class="line"><span style="color:#A6ACCD;">               options.chars(text)</span></span>
<span class="line"><span style="color:#A6ACCD;">             }</span></span>
<span class="line"><span style="color:#A6ACCD;">   }else{</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u7236\u5143\u7D20\u4E3Ascript\u3001style\u3001textarea\u7684\u5904\u7406\u903B\u8F91</span></span>
<span class="line"><span style="color:#A6ACCD;">   }</span></span>
<span class="line"><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4EE5\u4E0A\u5C31\u662Fvue\u89E3\u6790\u5668\u751F\u6210AST\u8BED\u6CD5\u6811\u7684\u4E3B\u6D41\u7A0B\u4E86\uFF0C\u4EE3\u7801\u7EC6\u8282\u7684\u5730\u65B9\u8FD8\u9700\u8981\u81EA\u5DF1\u53BB\u89E3\u8BFB\u6E90\u7801\uFF0C\u6E90\u7801\u4F4D\u7F6E:<strong>\\vue\\packages\\weex-template-compiler\\build.js</strong></p><h2 id="\u7ED3\u8BED\uFF1A" tabindex="-1"><strong>\u7ED3\u8BED\uFF1A</strong> <a class="header-anchor" href="#\u7ED3\u8BED\uFF1A" aria-hidden="true">#</a></h2><p>AST\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u77E5\u8BC6\u70B9\u4F5C\u4E3AJavaScript\u4E2D(\u4EFB\u4F55\u7F16\u7A0B\u8BED\u8A00\u4E2D\u90FD\u6709ast\u8FD9\u4E2A\u6982\u5FF5,\u8FD9\u91CC\u5C31\u4E0D\u8FC7\u591A\u8D58\u8FF0)\u76F8\u5BF9\u57FA\u7840\u7684\uFF0C\u4E5F\u662F\u6700\u4E0D\u53EF\u5FFD\u7565\u7684\u77E5\u8BC6\uFF0C\u5E26\u7ED9\u6211\u4EEC\u7684\u542F\u53D1\u662F\u65E0\u9650\u53EF\u80FD\u7684\uFF0C\u5B83\u5C31\u50CF\u4E00\u628A\u87BA\u4E1D\u5200\uFF0C\u80FD\u591F\u62C6\u89E3javascript\u8FD9\u53F0\u5E9E\u5927\u7684\u673A\u5668\uFF0C\u8BA9\u6211\u4EEC\u80FD\u591F\u770B\u5230\u4E00\u4E9B\u672C\u8D28\u7684\u4E1C\u897F\uFF0C\u540C\u65F6\u4E5F\u80FD\u901A\u8FC7\u5B83\u6279\u91CF\u6784\u5EFA\u4EFB\u4F55javascript\u4EE3\u7801\u3002</p><p>\u5C0F\u65F6\u5019\u68A6\u60F3\u6539\u53D8\u4E16\u754C\uFF0C\u5982\u4ECA\u6211\u4EEC\u53EF\u4EE5\u7528\u81EA\u5DF1\u5199\u7684\u7A0B\u5E8F\uFF0C\u6784\u5EFA\u51FA\u6211\u4EEC\u6240\u751F\u6D3B\u7684\u7F51\u7EDC\u4E16\u754C\uFF0C\u4E30\u5BCC\u591A\u59FF\u3002</p><p>\u501F\u7528\u4E00\u53E5\u6B4C\u8BCD: \u6211\u8FD8\u662F\u4ECE\u524D\u90A3\u4E2A\u5C11\u5E74\uFF0C\u6CA1\u6709\u4E00\u4E1D\u4E1D\u6539\u53D8\u3002\u65F6\u95F4\u53EA\u4E0D\u8FC7\u662F\u8003\u9A8C\uFF0C\u79CD\u5728\u5FC3\u4E2D\u4FE1\u5FF5\u4E1D\u6BEB\u672A\u51CF \u3002\u5E0C\u671B\u5927\u5BB6\u80FD\u591F\u5728\u8F6F\u4EF6\u5F00\u53D1\u7684\u8DEF\u9014\u4E0A\u575A\u5B9A\u4FE1\u5FF5\uFF0C\u8D8A\u8D70\u8D8A\u8FDC.....</p><p>(\u672A\u5B8C\u5F85\u7EED)</p><h2 id="\u53C2\u8003\u6587\u732E" tabindex="-1"><strong>\u53C2\u8003\u6587\u732E</strong> <a class="header-anchor" href="#\u53C2\u8003\u6587\u732E" aria-hidden="true">#</a></h2><p>[1]\u6731\u6C38\u76DB. WebKit \u6280\u672F\u5185\u5E55[M]. \u7535\u5B50\u5DE5\u4E1A\u51FA\u7248\u793E</p><p>[2] [\u7F8E] KYLE SIMPSON. \u4F60\u4E0D\u77E5\u9053\u7684JavaScript(\u4E0A\u5377)[M]. \u4EBA\u6C11 \u90AE\u7535\u51FA\u7248\u793E</p><p>[3] \u6708\u5F71. \u6DF1\u5165\u6D45\u51FAVue.js[M]. \u4EBA\u6C11\u90AE\u7535\u51FA\u7248\u793E</p><p>[4] V8\u5F15\u64CE\u8BE6\u89E3-AST <a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/6844904146798116871" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844904146798116871</a></p><p>[5] Babel\u63D2\u4EF6\u624B\u518C <a href="https://link.zhihu.com/?target=https%3A//github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md%23toc-stages-of-babel" target="_blank" rel="noopener noreferrer">https://github.com/jamiebuilds/</a></p>`,80),c=[r];function i(A,C,u,y,d,D){return n(),a("div",null,c)}var q=s(o,[["render",i]]);export{h as __pageData,q as default};
